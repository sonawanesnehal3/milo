{"version":3,"file":"links-159f4154.js","sources":["../../libs/features/links.js"],"sourcesContent":["let fetched = false;\nlet linkData = null;\n\nconst fetchSeoLinks = async (path) => {\n  if (!path) return null;\n  if (!fetched) {\n    const resp = await fetch(path);\n    if (resp.ok) {\n      const json = await resp.json();\n      linkData = json.data;\n    }\n    fetched = true;\n  }\n  return linkData;\n};\n\nexport default async function init(path, area = document) {\n  const seoLinks = await fetchSeoLinks(path);\n  if (!seoLinks) return;\n  const { origin } = window.location;\n  const pageLinks = area.querySelectorAll('a:not([href^=\"/\"])');\n  [...pageLinks].forEach((link) => {\n    seoLinks\n      .filter((s) => link.href.startsWith(s.domain)\n        || (s.domain === 'off-origin' && !link.href.startsWith(origin)))\n      .forEach((s) => {\n        if (s.rel) link.setAttribute('rel', s.rel);\n        if (s.window && !link.getAttribute('target')) link.setAttribute('target', s.window);\n      });\n  });\n}\n"],"names":["init","path","area","document","Promise","resolve","fetchSeoLinks","then","seoLinks","origin","window","location","pageLinks","querySelectorAll","forEach","link","filter","s","href","startsWith","domain","rel","setAttribute","getAttribute","fetched","linkData","_temp3","fetch","resp","_temp2","_temp","ok","json","data","e","reject"],"mappings":"MAgB8BA,IAAI,aAACC,IAAI,EAAEC,IAAI,GAAGC,QAAQ,EAAE;EAAA,OAAAC,OAAA,CAAAC,OAAA,CACjCC,aAAa,CAACL,IAAI,CAAC,EAAAM,IAAA,WAApCC,QAAQ;IACd,IAAI,CAACA,QAAQ,EAAE;IACf,MAAM;MAAEC;KAAQ,GAAGC,MAAM,CAACC,QAAQ;IAClC,MAAMC,SAAS,GAAGV,IAAI,CAACW,gBAAgB,CAAC,oBAAoB,CAAC;IAC7D,CAAC,GAAGD,SAAS,CAAC,CAACE,OAAO,CAAEC,IAAI,IAAK;MAC/BP,QAAQ,CACLQ,MAAM,CAAEC,CAAC,IAAKF,IAAI,CAACG,IAAI,CAACC,UAAU,CAACF,CAAC,CAACG,MAAM,CAAC,IACvCH,CAAC,CAACG,MAAM,KAAK,YAAY,IAAI,CAACL,IAAI,CAACG,IAAI,CAACC,UAAU,CAACV,MAAM,CAAE,CAAC,CACjEK,OAAO,CAAEG,CAAC,IAAK;QACd,IAAIA,CAAC,CAACI,GAAG,EAAEN,IAAI,CAACO,YAAY,CAAC,KAAK,EAAEL,CAAC,CAACI,GAAG,CAAC;QAC1C,IAAIJ,CAAC,CAACP,MAAM,IAAI,CAACK,IAAI,CAACQ,YAAY,CAAC,QAAQ,CAAC,EAAER,IAAI,CAACO,YAAY,CAAC,QAAQ,EAAEL,CAAC,CAACP,MAAM,CAAC;OACpF,CAAC;KACL,CAAC;;AACJ;AA9BA,IAAIc,OAAO,GAAG,KAAK;AACnB,IAAIC,QAAQ,GAAG,IAAI;AAEnB,MAAMnB,aAAa,aAAUL,IAAI;EAAA,IAAK;IACpC,IAAI,CAACA,IAAI,EAAE,OAAAG,OAAA,CAAAC,OAAA,CAAO,IAAI;IAAC,MAAAqB,MAAA;MAAA,IACnB,CAACF,OAAO;QAAA,OAAApB,OAAA,CAAAC,OAAA,CACSsB,KAAK,CAAC1B,IAAI,CAAC,EAAAM,IAAA,WAAxBqB,IAAI;UAAA,SAAAC;YAKVL,OAAO,GAAG,IAAI;;UAAC,MAAAM,KAAA;YAAA,IAJXF,IAAI,CAACG,EAAE;cAAA,OAAA3B,OAAA,CAAAC,OAAA,CACUuB,IAAI,CAACI,IAAI,EAAE,EAAAzB,IAAA,WAAxByB,IAAI;gBACVP,QAAQ,GAAGO,IAAI,CAACC,IAAI;;;;UAAC,OAAAH,KAAA,IAAAA,KAAA,CAAAvB,IAAA,GAAAuB,KAAA,CAAAvB,IAAA,CAAAsB,MAAA,IAAAA,MAAA,CAAAC,KAAA;;;;IAAA,OAAA1B,OAAA,CAAAC,OAAA,CAAAqB,MAAA,IAAAA,MAAA,CAAAnB,IAAA,GAAAmB,MAAA,CAAAnB,IAAA;MAIzB,OAAOkB,QAAQ;SAARA,QAAQ;GAChB,QAAAS,CAAA;IAAA,OAAA9B,OAAA,CAAA+B,MAAA,CAAAD,CAAA;;AAAA;;;;"}