{"version":3,"file":"send-to-caas-d58a79a7.js","sources":["../../tools/utils/utils.js","../../libs/utils/getUuid.js","../../libs/blocks/caas/utils.js","../../tools/send-to-caas/send-utils.js","../../tools/send-to-caas/send-to-caas.js"],"sourcesContent":["const IMS_CLIENT_ID = 'milo_ims';\nconst IMS_PROD_URL = 'https://auth.services.adobe.com/imslib/imslib.min.js';\nconst STYLE_SHEETS = {};\n\nconst getImsToken = async (loadScript) => {\n  window.adobeid = {\n    client_id: IMS_CLIENT_ID,\n    environment: 'prod',\n    scope: 'AdobeID,openid',\n  };\n\n  if (!window.adobeIMS) {\n    await loadScript(IMS_PROD_URL);\n  }\n  return window.adobeIMS?.getAccessToken()?.token;\n};\n\nconst getSheet = async (url) => {\n  if (STYLE_SHEETS[url]) return STYLE_SHEETS[url];\n  const resp = await fetch(url);\n  const text = await resp.text();\n  const sheet = new CSSStyleSheet();\n  sheet.replace(text);\n  STYLE_SHEETS[url] = sheet;\n  return sheet;\n};\n\nexport { getImsToken, getSheet };\n","/* eslint-disable */\nconst HEX_DIGITS = '0123456789abcdef'.split('');\n\nconst sha1 = async (message) => {\n  const data = new TextEncoder().encode(message);\n  const hashBuf = await crypto.subtle.digest('SHA-1', data);\n  return hashBuf;\n}\n\nconst uint8ToHex = (int) => {\n  const first = int >> 4;\n  const second = int - (first << 4);\n  return HEX_DIGITS[first] + HEX_DIGITS[second];\n};\n\nconst uint8ArrayToHex = (buf) => [...buf]\n  .map((int) => uint8ToHex(int))\n  .join('');\n\n// generates uuid v5\nconst hashToUuid = (buf) =>\n  [\n    uint8ArrayToHex(buf.slice(0, 4)),\n    '-',\n    uint8ArrayToHex(buf.slice(4, 6)),\n    '-',\n    uint8ToHex((buf[6] & 0x0f) | parseInt(5 * 10, 16)),\n    uint8ToHex(buf[7]),\n    '-',\n    uint8ToHex((buf[8] & 0x3f) | 0x80),\n    uint8ToHex(buf[9]),\n    '-',\n    uint8ArrayToHex(buf.slice(10, 16)),\n  ].join('');\n\nconst getUuid = async (str) => {\n  const buf = await sha1(str);\n  return hashToUuid(new Uint8Array(buf));\n}\n\nexport default getUuid;\n","/* eslint-disable compat/compat */\n/* eslint-disable no-underscore-dangle */\nimport {\n  getConfig as pageConfigHelper,\n  getMetadata,\n  loadScript,\n  loadStyle,\n  localizeLink,\n} from '../../utils/utils.js';\nimport { fetchWithTimeout } from '../utils/utils.js';\nimport getUuid from '../../utils/getUuid.js';\n\nexport const LOCALES = {\n  // Americas\n  ar: { ietf: 'es-AR' },\n  br: { ietf: 'pt-BR' },\n  ca: { ietf: 'en-CA' },\n  ca_fr: { ietf: 'fr-CA' },\n  cl: { ietf: 'es-CL' },\n  co: { ietf: 'es-CO' },\n  cr: { ietf: 'es-CR' },\n  ec: { ietf: 'es-EC' },\n  el: { ietf: 'es-EL' },\n  gt: { ietf: 'es-GT' },\n  la: { ietf: 'es-LA' },\n  mx: { ietf: 'es-MX' },\n  pe: { ietf: 'es-PE' },\n  pr: { ietf: 'es-PR' },\n  '': { ietf: 'en-US' },\n  langstore: { ietf: 'en-US' },\n  // EMEA\n  africa: { ietf: 'en-africa' },\n  be_fr: { ietf: 'fr-BE' },\n  be_en: { ietf: 'en-BE' },\n  be_nl: { ietf: 'nl-BE' },\n  cy_en: { ietf: 'en-CY' },\n  dk: { ietf: 'da-DK' },\n  de: { ietf: 'de-DE' },\n  ee: { ietf: 'et-EE' },\n  eg_ar: { ietf: 'ar-EG' },\n  eg_en: { ietf: 'en-GB' },\n  es: { ietf: 'es-ES' },\n  fr: { ietf: 'fr-FR' },\n  gr_en: { ietf: 'en-GR' },\n  gr_el: { ietf: 'el-GR' },\n  ie: { ietf: 'en-IE' },\n  il_en: { ietf: 'en-IL' },\n  il_he: { ietf: 'he-il' },\n  it: { ietf: 'it-IT' },\n  kw_ar: { ietf: 'ar-KW' },\n  kw_en: { ietf: 'en-GB' },\n  lv: { ietf: 'lv-LV' },\n  lt: { ietf: 'lt-LT' },\n  lu_de: { ietf: 'de-LU' },\n  lu_en: { ietf: 'en-LU' },\n  lu_fr: { ietf: 'fr-LU' },\n  hu: { ietf: 'hu-HU' },\n  mt: { ietf: 'en-MT' },\n  mena_en: { ietf: 'en-mena' },\n  mena_ar: { ietf: 'ar-mena' },\n  ng: { ietf: 'en-NG' },\n  nl: { ietf: 'nl-NL' },\n  no: { ietf: 'no-NO' },\n  pl: { ietf: 'pl-PL' },\n  pt: { ietf: 'pt-PT' },\n  qa_ar: { ietf: 'ar-QA' },\n  qa_en: { ietf: 'en-GB' },\n  ro: { ietf: 'ro-RO' },\n  sa_en: { ietf: 'en-sa' },\n  ch_fr: { ietf: 'fr-CH' },\n  ch_de: { ietf: 'de-CH' },\n  ch_it: { ietf: 'it-CH' },\n  si: { ietf: 'sl-SI' },\n  sk: { ietf: 'sk-SK' },\n  fi: { ietf: 'fi-FI' },\n  se: { ietf: 'sv-SE' },\n  tr: { ietf: 'tr-TR' },\n  ae_en: { ietf: 'en-ae' },\n  uk: { ietf: 'en-GB' },\n  at: { ietf: 'de-AT' },\n  cz: { ietf: 'cs-CZ' },\n  bg: { ietf: 'bg-BG' },\n  ru: { ietf: 'ru-RU' },\n  ua: { ietf: 'uk-UA' },\n  ae_ar: { ietf: 'ar-ae' },\n  sa_ar: { ietf: 'ar-sa' },\n  za: { ietf: 'en-ZA' },\n  // Asia Pacific\n  au: { ietf: 'en-AU' },\n  hk_en: { ietf: 'en-HK' },\n  in: { ietf: 'en-in' },\n  id_id: { ietf: 'id-id' },\n  id_en: { ietf: 'en-id' },\n  my_ms: { ietf: 'ms-my' },\n  my_en: { ietf: 'en-my' },\n  nz: { ietf: 'en-nz' },\n  ph_en: { ietf: 'en-ph' },\n  ph_fil: { ietf: 'fil-PH' },\n  sg: { ietf: 'en-SG' },\n  th_en: { ietf: 'en-th' },\n  in_hi: { ietf: 'hi-in' },\n  th_th: { ietf: 'th-th' },\n  cn: { ietf: 'zh-CN' },\n  hk_zh: { ietf: 'zh-HK' },\n  tw: { ietf: 'zh-TW' },\n  jp: { ietf: 'ja-JP' },\n  kr: { ietf: 'ko-KR' },\n  vn_en: { ietf: 'en-vn' },\n  vn_vi: { ietf: 'vi-VN' },\n};\n\nconst URL_ENCODED_COMMA = '%2C';\nexport const fgHeaderName = 'X-Adobe-Floodgate';\nexport const fgHeaderValue = 'pink';\n\nconst pageConfig = pageConfigHelper();\nconst pageLocales = Object.keys(pageConfig.locales || {});\nconst requestHeaders = [];\n\nexport function getPageLocale(currentPath, locales = pageLocales) {\n  const possibleLocale = currentPath.split('/')[1];\n  if (locales.includes(possibleLocale)) {\n    return possibleLocale;\n  }\n  // defaults to en_US\n  return '';\n}\n\nexport const isValidHtmlUrl = (url) => {\n  const regex = /^https:\\/\\/[^\\s]+$/;\n  return regex.test(url);\n};\nexport const isValidUuid = (id) => /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(id);\n\nexport const loadStrings = async (\n  url,\n  pathname = window.location.pathname,\n  locales = pageLocales,\n) => {\n  if (!url) return {};\n  try {\n    const locale = getPageLocale(pathname, locales);\n    const localizedURL = new URL(url);\n    if (locale) {\n      localizedURL.pathname = `${locale}${localizedURL.pathname}`;\n    }\n    let resp = await fetch(`${localizedURL}.plain.html`);\n    if (!resp.ok) {\n      resp = await fetch(`${url}.plain.html`);\n    }\n    if (!resp.ok) {\n      return {};\n    }\n    const html = await resp.text();\n    const parser = new DOMParser();\n    const document = parser.parseFromString(html, 'text/html');\n    const nodes = document.querySelectorAll('.string-mappings > div');\n    return [...nodes].reduce((ans, parent) => {\n      const children = parent.querySelectorAll('div');\n      const key = children[0]?.innerText;\n      const val = children[1]?.innerHTML;\n      if (key) {\n        ans[key] = val || '';\n      }\n      return ans;\n    }, {});\n  } catch (err) {\n    return {};\n  }\n};\n\nexport const decodeCompressedString = async (txt) => {\n  if (!window.DecompressionStream) {\n    await import('../../deps/compression-streams-pollyfill.js');\n  }\n  const b64decode = (str) => {\n    const binaryStr = window.atob(str);\n    const bytes = new Uint8Array(new ArrayBuffer(binaryStr.length));\n    binaryStr?.split('')\n      .forEach((c, i) => (bytes[i] = c.charCodeAt(0)));\n    return bytes;\n  };\n\n  const b64toStream = (b64) => new Blob([b64decode(b64)], { type: 'text/plain' }).stream();\n\n  const decompressStream = async (stream) => new Response(\n    // eslint-disable-next-line no-undef\n    stream.pipeThrough(new DecompressionStream('gzip')),\n  );\n\n  const responseToJSON = async (response) => {\n    const blob = await response.blob();\n    return JSON.parse(await blob.text());\n  };\n\n  const stream = b64toStream(txt);\n  const resp = await decompressStream(stream);\n  return responseToJSON(resp);\n};\n\nexport const loadCaasFiles = async () => {\n  const searchParams = new URLSearchParams(document.location.search);\n  const version = searchParams?.get('caasver') || 'stable';\n  let cssFile = `https://www.adobe.com/special/chimera/caas-libs/${version}/app.css`;\n  let jsFile = `https://www.adobe.com/special/chimera/caas-libs/${version}/main.min.js`;\n\n  // for caas local development\n  const host = searchParams?.get('caashost');\n  if (host) {\n    cssFile = `http://${host}.corp.adobe.com:5000/dist/app.css`;\n    jsFile = `http://${host}.corp.adobe.com:5000/dist/main.js`;\n  }\n\n  loadStyle(cssFile);\n  await loadScript(`https://www.adobe.com/special/chimera/caas-libs/${version}/react.umd.js`);\n  await loadScript(`https://www.adobe.com/special/chimera/caas-libs/${version}/react.dom.umd.js`);\n  await loadScript(jsFile);\n};\n\nexport const loadCaasTags = async (tagsUrl) => {\n  let errorMsg = '';\n  if (tagsUrl) {\n    const url = tagsUrl.startsWith('https://') || tagsUrl.startsWith('http://') ? tagsUrl : `https://${tagsUrl}`;\n    try {\n      const resp = await fetchWithTimeout(url);\n      if (resp.ok) {\n        const json = await resp.json();\n        return {\n          tags: json.namespaces.caas.tags,\n          error: '',\n        };\n      }\n    } catch (e) {\n      errorMsg = 'Unable to fetch tags, loading backup tags.  Please check tags url in the Advanced Panel';\n    }\n  } else {\n    errorMsg = 'Tags url is not defined in the Advanced Panel';\n  }\n\n  const { default: caasTags } = await import('../caas-config/caas-tags.js');\n  return {\n    tags: caasTags.namespaces.caas.tags,\n    errorMsg,\n  };\n};\n\nconst getTags = (() => {\n  let tags;\n  return (async (tagsUrl) => {\n    if (tags) return tags;\n\n    tags = await loadCaasTags(tagsUrl);\n    return tags;\n  });\n})();\n\nconst getContentIdStr = (cardStr, card) => {\n  if (card.contentId) {\n    return cardStr.length ? `${cardStr}%2C${card.contentId}` : card.contentId;\n  }\n  return cardStr;\n};\n\nconst wrapInParens = (s) => `(${s})`;\n\nconst buildComplexQuery = (andLogicTags, orLogicTags, notLogicTags) => {\n  let andQuery = andLogicTags\n    .filter((tag) => tag.intraTagLogic !== '' && tag.andTags.length)\n    .map((tag) => wrapInParens(tag.andTags.map((val) => `\"${val}\"`).join(`+${tag.intraTagLogic}+`)))\n    .join('+AND+');\n\n  let orQuery = orLogicTags\n    .filter((tag) => tag.orTags.length)\n    .map((tag) => wrapInParens(tag.orTags.map((val) => `\"${val}\"`).join('+AND+')))\n    .join('+OR+');\n\n  let notQuery = notLogicTags\n    .filter((tag) => tag.intraTagLogicExclude !== '' && tag.notTags.length)\n    .map((tag) => wrapInParens(tag.notTags.map((val) => `\"${val}\"`).join(`+${tag.intraTagLogicExclude}+`)))\n    .join('+AND+');\n\n  andQuery = andQuery.length ? wrapInParens(andQuery) : '';\n  orQuery = orQuery.length ? wrapInParens(orQuery) : '';\n  notQuery = notQuery.length ? wrapInParens(notQuery) : '';\n\n  return (andQuery || orQuery)\n    ? encodeURIComponent(`${andQuery}${\n      andQuery && orQuery ? '+AND+' : ''}${orQuery}${\n      (andQuery || orQuery) && notQuery ? '+AND+NOT+' : ''}${notQuery}`)\n    : '';\n};\n\nconst getSortOptions = (state, strs) => {\n  const sortVals = {\n    featured: 'Featured',\n    dateAsc: 'Date: (Oldest to Newest)',\n    dateDesc: 'Date: (Newest to Oldest)',\n    modifiedDesc: 'Date: (Last Modified, Newest to Oldest)',\n    modifiedAsc: 'Date (Last Modified, Oldest to Newest)',\n    eventSort: 'Events: (Live, Upcoming, OnDemand)',\n    titleAsc: 'Title A-Z',\n    titleDesc: 'Title Z-A',\n    random: 'Random',\n  };\n\n  return Object.entries(sortVals).reduce((options, [key, defaultValue]) => {\n    const fullKey = `sort${key.charAt(0).toUpperCase() + key.slice(1)}`;\n    if (state[fullKey]) {\n      options.push({\n        label: strs[fullKey] || defaultValue,\n        sort: key,\n      });\n    }\n    return options;\n  }, []);\n};\n\nconst findTagById = (id, tags) => {\n  let tagObj = Object.values(tags).find((tag) => tag.tagID === id);\n  if (tagObj) return tagObj;\n\n  Object.values(tags).some((tag) => {\n    tagObj = findTagById(id, tag.tags);\n    return tagObj;\n  });\n\n  return tagObj;\n};\n\nconst alphaSort = (a, b) => {\n  const itemA = a.label.toUpperCase();\n  const itemB = b.label.toUpperCase();\n  if (itemA < itemB) return -1;\n  if (itemA > itemB) return 1;\n  /* c8 ignore next */\n  return 0;\n};\n\nconst getLocalTitle = (tag, country, lang) => tag[`title.${lang}_${country}`]\n  || tag[`title.${lang}`]\n  || tag.title;\n\nconst getFilterObj = (\n  { excludeTags, filterTag, icon, openedOnLoad },\n  tags,\n  state,\n  country,\n  lang,\n) => {\n  if (!filterTag?.[0]) return null;\n  const tagId = filterTag[0];\n  const tag = findTagById(tagId, tags);\n  if (!tag) return null;\n  const items = Object.values(tag.tags)\n    .map((itemTag) => {\n      if (excludeTags?.includes(itemTag.tagID)) return null;\n      const titleLabel = getLocalTitle(itemTag, country, lang);\n      return {\n        id: itemTag.tagID,\n        label: titleLabel.replace('&amp;', '&'),\n      };\n    })\n    .filter((i) => i !== null)\n    .sort(alphaSort);\n\n  const filterObj = {\n    id: tagId,\n    openedOnLoad: !!openedOnLoad,\n    items,\n    group: getLocalTitle(tag, country, lang),\n  };\n\n  if (icon) {\n    filterObj.icon = icon;\n  }\n\n  return filterObj;\n};\n\nconst getCustomFilterObj = ({ group, filtersCustomItems, openedOnLoad }, strs = {}) => {\n  if (!group) return null;\n\n  const IN_BRACKETS_RE = /^{.*}$/;\n\n  const items = filtersCustomItems.map((item) => ({\n    id: item.customFilterTag[0],\n    label: item.filtersCustomLabel?.match(IN_BRACKETS_RE)\n      ? strs[item.filtersCustomLabel.replace(/{|}/g, '')]\n      : item.filtersCustomLabel || '',\n  }));\n\n  const filterObj = {\n    id: group,\n    openedOnLoad: !!openedOnLoad,\n    items,\n    group: group?.match(IN_BRACKETS_RE)\n      ? strs[group.replace(/{|}/g, '')]\n      : group || '',\n  };\n\n  return filterObj;\n};\n\nconst getFilterArray = async (state, country, lang, strs) => {\n  if ((!state.showFilters || state.filters.length === 0) && state.filtersCustom?.length === 0) {\n    return [];\n  }\n\n  const { tags } = await getTags(state.tagsUrl);\n  const useCustomFilters = state.filterBuildPanel === 'custom';\n\n  let filters = [];\n  if (!useCustomFilters) {\n    filters = state.filters\n      .map((filter) => getFilterObj(filter, tags, state, country, lang))\n      .filter((filter) => filter !== null);\n  } else {\n    filters = state.filtersCustom.length > 0\n      ? state.filtersCustom.map((filter) => getCustomFilterObj(filter, strs))\n      : [];\n  }\n\n  return filters;\n};\n\nexport function getCountryAndLang({ autoCountryLang, country, language }) {\n  const locales = getMetadata('caas-locales') || '';\n  if (autoCountryLang) {\n    const prefix = pageConfigHelper()?.locale?.prefix?.replace('/', '') || '';\n    const locale = LOCALES[prefix]?.ietf || 'en-US';\n    /* eslint-disable-next-line prefer-const */\n    let [currLang, currCountry] = locale.split('-');\n\n    return {\n      country: currCountry,\n      language: currLang,\n      locales,\n    };\n  }\n  return {\n    country: country ? country.split('/').pop() : 'US',\n    language: language ? language.split('/').pop() : 'en',\n    locales,\n  };\n}\n\n/**\n * Finds the matching tuple and returns its index.\n * Looks for 'X-Adobe-Floodgate' in [['X-Adobe-Floodgate', 'pink'], ['a','b']]\n * @param {*} fgHeader fgHeader\n * @returns tupleIndex\n */\nconst findTupleIndex = (fgHeader) => {\n  const matchingTupleIndex = requestHeaders.findIndex((element) => element[0] === fgHeader);\n  return matchingTupleIndex;\n};\n\n/**\n * Adds the floodgate header to the Config of ConsonantCardCollection\n * headers: [['X-Adobe-Floodgate', 'pink'], ['OtherHeader', 'Value']]\n * @param {*} state state\n * @returns requestHeaders\n */\nconst addFloodgateHeader = (state) => {\n  // Delete FG header if already exists, before adding pink to avoid duplicates in requestHeaders\n  requestHeaders.splice(findTupleIndex(fgHeaderName, 1));\n  if (state.fetchCardsFromFloodgateTree) {\n    requestHeaders.push([fgHeaderName, fgHeaderValue]);\n  }\n  return requestHeaders;\n};\n\nexport function arrayToObj(input = []) {\n  const obj = {};\n  if (!Array.isArray(input)) {\n    // eslint-disable-next-line no-param-reassign\n    input = [];\n  }\n  input.forEach((item) => {\n    if (item.key && item.value) {\n      obj[item.key] = item.value;\n    }\n  });\n  return obj;\n}\n\nconst addMissingStateProps = (state) => {\n  // eslint-disable-next-line no-use-before-define\n  Object.entries(defaultState).forEach(([key, val]) => {\n    if (state[key] === undefined) {\n      state[key] = val;\n    }\n  });\n  return state;\n};\n\nconst fetchUuidForCard = async (card) => {\n  if (!card.contentId) {\n    return null;\n  }\n  if (isValidUuid(card.contentId)) {\n    return card.contentId;\n  }\n  try {\n    const url = new URL(card.contentId);\n    const localizedLink = localizeLink(url, null, true);\n    const substr = String(localizedLink).split('https://').pop();\n    return await getUuid(substr);\n  } catch (error) {\n    return null;\n  }\n};\n\nconst getCardsString = async (cards = []) => {\n  const uuids = await Promise.all(cards.map(async (card) => {\n    const uuid = await fetchUuidForCard(card);\n    return uuid !== null ? uuid : undefined;\n  }));\n  return uuids.filter(Boolean).join('%2C');\n};\n\nexport const getConfig = async (originalState, strs = {}) => {\n  const state = addMissingStateProps(originalState);\n  const originSelection = Array.isArray(state.source) ? state.source.join(',') : state.source;\n  const { country, language, locales } = getCountryAndLang(state);\n  const featuredCards = state.featuredCards ? await getCardsString(state.featuredCards) : '';\n  const excludedCards = state.excludedCards && state.excludedCards.reduce(getContentIdStr, '');\n  const hideCtaIds = state.hideCtaIds ? state.hideCtaIds.reduce(getContentIdStr, '') : '';\n  const hideCtaTags = state.hideCtaTags ? state.hideCtaTags : [];\n  const targetActivity = state.targetEnabled\n  && state.targetActivity ? `/${encodeURIComponent(state.targetActivity)}.json` : '';\n  const flatFile = targetActivity ? '&flatFile=false' : '';\n  const localesQueryParam = locales ? `&locales=${locales}` : '';\n  const debug = state.showIds && document.location.pathname.includes('/tools/caas') ? '&debug=true' : '';\n  const collectionTags = state.includeTags ? state.includeTags.join(',') : '';\n  const excludeContentWithTags = state.excludeTags ? state.excludeTags.join(',') : '';\n\n  const complexQuery = buildComplexQuery(state.andLogicTags, state.orLogicTags, state.notLogicTags);\n\n  const caasRequestHeaders = addFloodgateHeader(state);\n\n  const config = {\n    collection: {\n      mode: state.theme,\n      layout: {\n        type: state.layoutType,\n        gutter: state.gutter,\n        container: state.container,\n      },\n      button: { style: state.collectionBtnStyle },\n      resultsPerPage: state.resultsPerPage,\n      endpoint: `https://${\n        state.endpoint\n      }${targetActivity}?originSelection=${originSelection}&contentTypeTags=${state.contentTypeTags.join(\n        ',',\n      )}&secondSource=${state.showSecondarySource ? state.secondarySource.join(',') : []}&secondaryTags=${state.showSecondarySource ? state.secondaryTags.join(\n        ',',\n      ) : []}&collectionTags=${collectionTags}&excludeContentWithTags=${excludeContentWithTags}&language=${language}&country=${country}&complexQuery=${complexQuery}&excludeIds=${excludedCards}&currentEntityId=&featuredCards=${featuredCards}&environment=&draft=${\n        state.draftDb\n      }&size=${state.collectionSize || state.totalCardsToShow}${localesQueryParam}${debug}${flatFile}`,\n      fallbackEndpoint: state.fallbackEndpoint,\n      totalCardsToShow: state.totalCardsToShow,\n      cardStyle: state.cardStyle,\n      showTotalResults: state.showTotalResults,\n      i18n: {\n        prettyDateIntervalFormat:\n          strs.prettyDateIntervalFormat || '{ddd}, {LLL} {dd} | {timeRange} {timeZone}',\n        totalResultsText: strs.totalResults || '{total} results',\n        title: state.collectionTitle?.match(/^{.*}$/) ? strs[state.collectionTitle.replace(/{|}/g, '')] : state.collectionTitle || '',\n        titleHeadingLevel: state.titleHeadingLevel,\n        cardTitleAccessibilityLevel: state.cardTitleAccessibilityLevel,\n        onErrorTitle: strs.onErrorTitle || 'Sorry there was a system error.',\n        onErrorDescription: strs.onErrorDesc\n          || 'Please try reloading the page or try coming back to the page another time.',\n        lastModified: strs.lastModified || 'Last modified {date}',\n      },\n      detailsTextOption: state.detailsTextOption,\n      setCardBorders: state.setCardBorders,\n      showFooterDivider: state.showFooterDivider,\n      useOverlayLinks: state.useOverlayLinks,\n      collectionButtonStyle: state.collectionBtnStyle,\n      banner: {\n        register: {\n          description: strs.registrationText || 'Sign Up',\n          url: strs.registrationUrl || '#registration',\n        },\n        upcoming: { description: strs.upComingText || 'Upcoming' },\n        live: { description: strs.liveText || 'Live' },\n        onDemand: { description: strs.onDemandText || 'On Demand' },\n      },\n      useLightText: state.useLightText,\n      disableBanners: state.disableBanners,\n      reservoir: {\n        sample: state.sortReservoirSample,\n        pool: state.sortReservoirPool,\n      },\n      ctaAction: state.ctaAction,\n      additionalRequestParams: arrayToObj(state.additionalRequestParams),\n    },\n    hideCtaIds: hideCtaIds.split(URL_ENCODED_COMMA),\n    hideCtaTags,\n    featuredCards: featuredCards.split(URL_ENCODED_COMMA),\n    filterPanel: {\n      enabled: state.showFilters,\n      eventFilter: state.filterEvent,\n      type: state.showFilters ? state.filterLocation : 'left',\n      showEmptyFilters: state.filtersShowEmpty,\n      filters: await getFilterArray(state, country, language, strs),\n      filterLogic: state.filterLogic,\n      i18n: {\n        leftPanel: {\n          header: strs.filterLeftPanel || 'Refine Your Results',\n          clearAllFiltersText: strs.filterClearAll || 'Clear All',\n          mobile: {\n            filtersBtnLabel: strs.filterMobileButton || 'Filters',\n            panel: {\n              header: strs.filterMobilePanel || 'Filter by',\n              totalResultsText: strs.totalResults || '{total} results',\n              applyBtnText: strs.filterApply || 'Apply',\n              clearFilterText: strs.filterClear || 'Clear',\n              doneBtnText: strs.filterDone || 'Done',\n            },\n            group: {\n              totalResultsText: strs.totalResults || '{total} results',\n              applyBtnText: strs.filterApply || 'Apply',\n              clearFilterText: strs.filterClear || 'Clear',\n              doneBtnText: strs.filterDone || 'Done',\n            },\n          },\n        },\n        topPanel: {\n          groupLabel: strs.filterGroupLabel || 'Filters:',\n          clearAllFiltersText: strs.filterClearAll || 'Clear All',\n          moreFiltersBtnText: strs.filtermore || 'More Filters +',\n          mobile: {\n            group: {\n              totalResultsText: strs.totalResults || '{total} results',\n              applyBtnText: strs.filterApply || 'Apply',\n              clearFilterText: strs.filterClear || 'Clear',\n              doneBtnText: strs.filterDone || 'Done',\n            },\n          },\n        },\n      },\n    },\n    sort: {\n      enabled: state.sortEnablePopup,\n      defaultSort: state.sortDefault,\n      options: getSortOptions(state, strs),\n    },\n    pagination: {\n      animationStyle: state.paginationAnimationStyle,\n      enabled: state.paginationEnabled,\n      resultsQuantityShown: state.paginationQuantityShown,\n      loadMoreButton: {\n        style: state.loadMoreBtnStyle,\n        useThemeThree: state.paginationUseTheme3,\n      },\n      type: state.paginationType,\n      i18n: {\n        loadMore: {\n          btnText: strs.pgLoadMore || 'Load More',\n          resultsQuantityText: strs.pgLoadMoreResultsQty || '{start} of {end} displayed',\n        },\n        paginator: {\n          resultsQuantityText: strs.pgResultsQuantity || '{start} - {end} of {total} results',\n          prevLabel: strs.pgPrevious || 'Prev',\n          nextLabel: strs.pgNext || 'Next',\n        },\n      },\n    },\n    bookmarks: {\n      showOnCards: state.showBookmarksOnCards,\n      leftFilterPanel: {\n        bookmarkOnlyCollection: state.onlyShowBookmarkedCards,\n        showBookmarksFilter: state.showBookmarksFilter,\n        selectBookmarksIcon: state.bookmarkIconSelect,\n        unselectBookmarksIcon: state.bookmarkIconUnselect,\n      },\n      i18n: {\n        leftFilterPanel: { filterTitle: strs.bmFilterTitle || 'My favorites' },\n        card: {\n          saveText: strs.bmSaveCard || 'Save Card',\n          unsaveText: strs.bmUnsaveCard || 'Unsave Card',\n        },\n      },\n    },\n    search: {\n      enabled: state.showSearch,\n      searchFields: state.searchFields,\n      i18n: {\n        noResultsTitle: strs.searchNoResults || 'No Results Found',\n        noResultsDescription:\n          strs.searchNoResultsDesc || 'Try checking your spelling or broadening your search.',\n        leftFilterPanel: {\n          searchTitle: strs.searchTitle || 'Search',\n          searchPlaceholderText: strs.searchPlaceholder || 'Search Here',\n        },\n        topFilterPanel: { searchPlaceholderText: strs.searchPlaceholder || 'Search Here' },\n        filterInfo: { searchPlaceholderText: strs.searchPlaceholder || 'Search Here' },\n      },\n    },\n    language,\n    country,\n    analytics: {\n      trackImpressions: state.analyticsTrackImpression || '',\n      collectionIdentifier: state.analyticsCollectionName,\n    },\n    target: {\n      enabled: state.targetEnabled || '',\n      lastViewedSession: state.lastViewedSession || '',\n    },\n    customCard: ['card', `return \\`${state.customCard}\\``],\n    headers: caasRequestHeaders,\n  };\n  return config;\n};\n\nexport const initCaas = async (state, caasStrs, el) => {\n  window.dexter = window.dexter || {}; // required for caas modals\n\n  const caasEl = el || document.getElementById('caas');\n  if (!caasEl) return;\n\n  const appEl = caasEl.parentElement;\n  caasEl.remove();\n\n  const newEl = document.createElement('div');\n  newEl.id = 'caas';\n  newEl.className = 'caas-preview';\n  appEl.append(newEl);\n\n  const config = await getConfig(state, caasStrs);\n\n  // eslint-disable-next-line no-new, no-undef\n  new ConsonantCardCollection(config, newEl);\n};\n\nexport const defaultState = {\n  additionalRequestParams: [],\n  analyticsCollectionName: '',\n  analyticsTrackImpression: false,\n  andLogicTags: [],\n  autoCountryLang: false,\n  fetchCardsFromFloodgateTree: false,\n  bookmarkIconSelect: '',\n  bookmarkIconUnselect: '',\n  cardStyle: 'half-height',\n  cardTitleAccessibilityLevel: 6,\n  collectionBtnStyle: 'primary',\n  collectionName: '',\n  collectionTitle: '',\n  collectionSize: '',\n  container: '1200MaxWidth',\n  contentTypeTags: [],\n  country: 'caas:country/us',\n  customCard: '',\n  ctaAction: '_self',\n  doNotLazyLoad: false,\n  disableBanners: false,\n  draftDb: false,\n  endpoint: 'www.adobe.com/chimera-api/collection',\n  environment: '',\n  excludedCards: [],\n  excludeTags: [],\n  fallbackEndpoint: '',\n  featuredCards: [],\n  filterEvent: '',\n  filterBuildPanel: 'automatic',\n  filterLocation: 'left',\n  filterLogic: 'or',\n  filters: [],\n  filtersCustom: [],\n  filtersShowEmpty: false,\n  gutter: '4x',\n  headers: [],\n  hideCtaIds: [],\n  hideCtaTags: [],\n  includeTags: [],\n  language: 'caas:language/en',\n  layoutType: '4up',\n  loadMoreBtnStyle: 'primary',\n  notLogicTags: [],\n  onlyShowBookmarkedCards: false,\n  orLogicTags: [],\n  paginationAnimationStyle: 'paged',\n  paginationEnabled: false,\n  paginationQuantityShown: false,\n  paginationType: 'paginator',\n  paginationUseTheme3: false,\n  placeholderUrl: '',\n  resultsPerPage: 5,\n  searchFields: [],\n  secondaryTags: [],\n  secondarySource: [],\n  setCardBorders: false,\n  showFooterDivider: false,\n  showBookmarksFilter: false,\n  showBookmarksOnCards: false,\n  showFilters: false,\n  showIds: false,\n  showSearch: false,\n  showTotalResults: false,\n  sortDateAsc: false,\n  sortDateDesc: false,\n  sortDateModified: false,\n  sortDefault: 'dateDesc',\n  sortEnablePopup: false,\n  sortEnableRandomSampling: false,\n  sortEventSort: false,\n  sortFeatured: false,\n  sortModifiedAsc: false,\n  sortModifiedDesc: false,\n  sortRandom: false,\n  sortReservoirPool: 1000,\n  sortReservoirSample: 3,\n  sortTitleAsc: false,\n  sortTitleDesc: false,\n  source: ['hawks'],\n  tagsUrl: 'www.adobe.com/chimera-api/tags',\n  targetActivity: '',\n  targetEnabled: false,\n  theme: 'lightest',\n  detailsTextOption: 'default',\n  titleHeadingLevel: 'h3',\n  totalCardsToShow: 10,\n  useLightText: false,\n  useOverlayLinks: false,\n  collectionButtonStyle: 'primary',\n  userInfo: [],\n};\n","import getUuid from '../../libs/utils/getUuid.js';\nimport { getMetadata } from '../../libs/utils/utils.js';\nimport { LOCALES } from '../../libs/blocks/caas/utils.js';\n\nconst CAAS_TAG_URL = 'https://www.adobe.com/chimera-api/tags';\nconst HLX_ADMIN_STATUS = 'https://admin.hlx.page/status';\nconst URL_POSTXDM = 'https://14257-milocaasproxy.adobeio-static.net/api/v1/web/milocaas/postXDM';\nconst VALID_URL_RE = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;\nconst VALID_MODAL_RE = /fragments(.*)#[a-zA-Z0-9_-]+$/;\n\nconst isKeyValPair = /(\\s*\\S+\\s*:\\s*\\S+\\s*)/;\nconst isValidUrl = (u) => VALID_URL_RE.test(u);\nconst isValidModal = (u) => VALID_MODAL_RE.test(u);\n\nconst [setConfig, getConfig] = (() => {\n  let config = {\n    isInjectedDoc: () => this.doc !== document,\n    doc: document,\n  };\n  return [\n    (c) => {\n      config = { ...config, ...c };\n      return config;\n    },\n    () => config,\n  ];\n})();\n\nconst getKeyValPairs = (s) => {\n  if (!s) return [];\n  return s\n    .split(',')\n    .filter((v) => v.length)\n    .filter((v) => isKeyValPair.test(v))\n    .map((v) => {\n      const [key, ...value] = v.split(':');\n      return {\n        key: key.trim(),\n        value: value.join(':').trim(),\n      };\n    });\n};\n\nconst addHost = (url) => {\n  if (url.startsWith('http')) return url;\n  const { host } = getConfig();\n  return `https://${host}${url.startsWith('/') ? '' : '/'}${url}`;\n};\n\nconst getMetaContent = (propType, propName) => {\n  const metaEl = getConfig().doc.querySelector(`meta[${propType}='${propName}']`);\n  if (!metaEl) return undefined;\n  return metaEl.content;\n};\n\nconst prefixHttps = (url) => {\n  if (!(url?.startsWith('https://') || url?.startsWith('http://'))) {\n    return `https://${url}`;\n  }\n  return url;\n};\n\nconst flattenLink = (link) => {\n  const htmlElement = document.createElement('div');\n  htmlElement.innerHTML = link;\n  return htmlElement.querySelector('a').getAttribute('href');\n};\n\nconst checkUrl = (url, errorMsg) => {\n  if (url === undefined || isValidModal(url)) return url;\n  const flatUrl = url.includes('href=') ? flattenLink(url) : url;\n  if (isValidModal(flatUrl)) {\n    return flatUrl;\n  }\n  return isValidUrl(flatUrl) ? prefixHttps(flatUrl) : { error: errorMsg };\n};\n\n// Case-insensitive search through tag name, path, id and title for the searchStr\nconst findTag = (tags, searchStr, ignore = []) => {\n  const childTags = [];\n  let matchingTag = Object.values(tags).find((tag) => {\n    if (\n      ignore.includes(tag.title)\n      || ignore.includes(tag.name)\n      || ignore.includes(tag.path)\n      || ignore.includes(tag.tagID)\n    ) return false;\n\n    if (tag.tags && Object.keys(tag.tags).length) {\n      childTags.push(tag.tags);\n    }\n\n    const tagMatches = [\n      tag.title.toLowerCase(),\n      tag.name,\n      tag.path,\n      tag.path.replace('/content/cq:tags/', ''),\n      tag.tagID,\n    ];\n\n    if (tagMatches.includes(searchStr.toLowerCase())) return true;\n\n    return false;\n  });\n\n  if (!matchingTag) {\n    childTags.some((childTag) => {\n      matchingTag = findTag(childTag, searchStr, ignore);\n      return matchingTag;\n    });\n  }\n\n  return matchingTag;\n};\n\nconst [getCaasTags, loadCaasTags] = (() => {\n  let tags;\n  return [\n    () => tags,\n    async () => {\n      try {\n        const resp = await fetch(CAAS_TAG_URL);\n        if (resp.ok) {\n          const json = await resp.json();\n          tags = json.namespaces.caas.tags;\n          return;\n        }\n      } catch (e) {\n        // ignore\n      }\n      const { default: caasTags } = await import('../../libs/blocks/caas-config/caas-tags.js');\n      tags = caasTags.namespaces.caas.tags;\n    }];\n})();\n\nconst getTag = (tagName, errors) => {\n  if (!tagName) return undefined;\n  const caasTags = getCaasTags();\n  // search all except Events first\n  const tag = findTag(caasTags, tagName, ['Events']) || findTag(caasTags.events.tags, tagName, []);\n\n  if (!tag) {\n    errors.push(tagName);\n  }\n\n  return tag;\n};\n\nconst getTags = (s) => {\n  let rawTags = [];\n  if (s) {\n    rawTags = s.toLowerCase().split(/,|(\\s+)|(\\\\n)|;/g).filter((t) => t && t.trim() && t !== '\\n');\n  }\n\n  const errors = [];\n\n  const tagIds = rawTags.map((tag) => getTag(tag, errors))\n    .filter((tag) => tag !== undefined)\n    .map((tag) => tag.tagID);\n\n  const tags = [...new Set(tagIds)]\n    .map((tagID) => ({ id: tagID }));\n\n  return {\n    tagErrors: errors,\n    tags,\n  };\n};\n\nconst getDateProp = (dateStr, errorMsg) => {\n  if (!dateStr) return undefined;\n  try {\n    const date = new Date(dateStr);\n    if (date.getFullYear() < 2000) return { error: `${errorMsg} - Date is before the year 2000` };\n    return date.toISOString();\n  } catch (e) {\n    return { error: errorMsg };\n  }\n};\n\nconst processRepoForFloodgate = (repo, fgColor) => {\n  if (repo && fgColor && fgColor !== 'default') {\n    return repo.slice(0, repo.lastIndexOf(`-${fgColor}`));\n  }\n  return repo;\n};\n\nconst getOrigin = (fgColor) => {\n  const { project, repo } = getConfig();\n  const origin = project || processRepoForFloodgate(repo, fgColor);\n\n  const mappings = {\n    cc: 'hawks',\n    dc: 'doccloud',\n  };\n  const originLC = (mappings[origin] || origin).toLowerCase();\n  if (originLC) {\n    return originLC;\n  }\n\n  if (window.location.hostname.endsWith('.hlx.page')) {\n    const [, singlePageRepo] = window.location.hostname.split('.')[0].split('--');\n    return processRepoForFloodgate(singlePageRepo, fgColor);\n  }\n\n  throw new Error('No Project or Repo defined in config');\n};\n\nconst getUrlWithoutFile = (url) => `${url.split('/').slice(0, -1).join('/')}/`;\n\nconst getImagePathMd = (keyName) => {\n  const mdEl = getConfig().doc.querySelector('.card-metadata');\n  if (!mdEl) return null;\n\n  let url = '';\n  [...mdEl.children].some((n) => {\n    const key = n.firstElementChild.textContent?.trim().toLowerCase();\n    if (key !== keyName) return false;\n\n    const img = n.lastElementChild.querySelector('img');\n\n    if (img) {\n      let imgSrc = img.src;\n      if (getConfig().bulkPublish) {\n        const rawImgSrc = img.attributes.src.value;\n        if (rawImgSrc.startsWith('./')) {\n          const urlWithoutFile = getUrlWithoutFile(getConfig().pageUrl);\n          imgSrc = `${urlWithoutFile}${rawImgSrc}`;\n        } else if (rawImgSrc.startsWith('/')) {\n          imgSrc = `${new URL(getConfig.pageUrl.origin)}${rawImgSrc}`;\n        } else {\n          imgSrc = rawImgSrc;\n        }\n      }\n      url = new URL(imgSrc)?.pathname;\n    } else { // url string to img\n      url = n.lastElementChild.textContent?.trim();\n    }\n    return true;\n  });\n  return url;\n};\n\nconst getCardImageUrl = () => {\n  const { doc } = getConfig();\n  const imageUrl = getImagePathMd('image')\n    || getImagePathMd('cardimage')\n    || getImagePathMd('cardimagepath')\n    || doc.querySelector('main')?.querySelector('img')?.src.replace(/\\?.*/, '')\n    || doc.querySelector('meta[property=\"og:image\"]')?.content;\n\n  if (!imageUrl) return null;\n  return addHost(imageUrl);\n};\n\nconst getCardImageAltText = () => {\n  // eslint-disable-next-line no-use-before-define\n  const pageMd = parseCardMetadata();\n  if (pageMd.cardimage) return '';\n  const cardImageUrl = getCardImageUrl();\n  const cardImagePath = new URL(cardImageUrl).pathname.split('/').pop();\n  const imgTagForCardImage = getConfig().doc.querySelector(`img[src*=\"${cardImagePath}\"]`);\n  return imgTagForCardImage?.alt;\n};\n\nconst getBadges = (p) => {\n  const badges = [];\n  if (p.badgeimage) {\n    badges.push({ type: 'image', value: addHost(p.badgeimage) });\n  }\n  if (p.badgetext) {\n    badges.push({ type: 'text', value: p.badgetext });\n  }\n  return badges;\n};\n\nconst isPagePublished = async () => {\n  let { branch, repo, owner } = getConfig();\n  if (!(branch || repo || owner)\n    && window.location.hostname.endsWith('.hlx.page')) {\n    [branch, repo, owner] = window.location.hostname.split('.')[0].split('--');\n  }\n\n  if (!(branch || repo || owner)) {\n    throw new Error(`Branch, Repo or Owner is not set - branch: ${branch}, repo: ${repo}, owner: ${owner}`);\n  }\n\n  const res = await fetch(\n    `${HLX_ADMIN_STATUS}/${owner}/${repo}/${branch}${window.location.pathname}`,\n  );\n  if (res.ok) {\n    const json = await res.json();\n    return json.live.status === 200;\n  }\n  return false;\n};\n\nconst getBulkPublishLangAttr = async (options) => {\n  let { getLocale } = getConfig();\n  if (!getLocale) {\n    // This is only imported from the bulk publisher so there is no dependency cycle\n    // eslint-disable-next-line import/no-cycle\n    const { getLocale: utilsGetLocale } = await import('../../libs/utils/utils.js');\n    getLocale = utilsGetLocale;\n    setConfig({ getLocale });\n  }\n  return getLocale(LOCALES, options.prodUrl).ietf;\n};\n\nconst getCountryAndLang = async (options) => {\n  const langStr = window.location.pathname === '/tools/send-to-caas/bulkpublisher.html'\n    ? await getBulkPublishLangAttr(options)\n    : (LOCALES[window.location.pathname.split('/')[1]] || LOCALES['']).ietf;\n  const langAttr = langStr?.toLowerCase().split('-') || [];\n\n  const [lang = 'en', country = 'us'] = langAttr;\n  return {\n    country,\n    lang,\n  };\n};\n\nconst parseCardMetadata = () => {\n  const pageMd = {};\n  const marqueeMetadata = getConfig().doc.querySelector('.caas-marquee-metadata');\n  const cardMetadata = getConfig().doc.querySelector('.card-metadata');\n  const mdEl = cardMetadata || marqueeMetadata;\n  const allowHtml = ['description'];\n  if (mdEl) {\n    mdEl.childNodes.forEach((n) => {\n      const key = n.children?.[0]?.textContent?.toLowerCase();\n      let val = n.children?.[1]?.textContent;\n      if (marqueeMetadata && allowHtml.includes(key)) {\n        val = n.children?.[1]?.innerHTML;\n      }\n      if (!key) return;\n\n      pageMd[key] = val;\n    });\n  }\n  return pageMd;\n};\n\nfunction checkCtaUrl(s, options, i) {\n  if (s?.trim() === '') return '';\n  const url = s || options.prodUrl || window.location.origin + window.location.pathname;\n  return checkUrl(url, `Invalid Cta${i}Url: ${url}`);\n}\n\n/** card metadata props - either a func that computes the value or\n * 0 to use the string as is\n * funcs that return an object with { error: string } will report the error\n */\nconst props = {\n  arbitrary: (s) => getKeyValPairs(s).map((pair) => ({ key: pair.key, value: pair.value })),\n  badgeimage: () => getImagePathMd('badgeimage'),\n  badgetext: 0,\n  bookmarkaction: 0,\n  bookmarkenabled: (s = '') => {\n    if (s) {\n      const lcs = s.toLowerCase();\n      if (lcs === 'true' || lcs === 'on' || lcs === 'yes') {\n        return true;\n      }\n    }\n    return undefined;\n  },\n  bookmarkicon: 0,\n  carddescription: 0,\n  cardtitle: 0,\n  cardimage: () => getCardImageUrl(),\n  cardimagealttext: (s) => s || getCardImageAltText(),\n  contentid: (_, options) => getUuid(options.prodUrl),\n  contenttype: (s) => s || getMetaContent('property', 'og:type') || getConfig().contentType,\n  country: async (s, options) => {\n    if (s) return s;\n    const { country } = await getCountryAndLang(options);\n    return country;\n  },\n  created: (s) => {\n    if (s) {\n      return getDateProp(s, `Invalid Created Date: ${s}`);\n    }\n    const cardDate = parseCardMetadata()?.carddate;\n    if (cardDate) {\n      return getDateProp(cardDate, `Invalid Date: ${cardDate}`);\n    }\n\n    const pubDate = getMetaContent('name', 'publishdate') || getMetaContent('name', 'publication-date');\n    const { doc, lastModified } = getConfig();\n    return pubDate\n      ? getDateProp(pubDate, `publication-date metadata is not a valid date: ${pubDate}`)\n      : getDateProp(lastModified || doc.lastModified, `document.lastModified is not a valid date: ${doc.lastModified}`);\n  },\n  cta1icon: (s) => checkUrl(s, `Invalid Cta1Icon url: ${s}`),\n  cta1style: 0,\n  cta1target: 0,\n  cta1text: 0,\n  cta1url: (s, options) => checkCtaUrl(s, options, 1),\n  cta2icon: (s) => checkUrl(s, `Invalid Cta2Icon url: ${s}`),\n  cta2style: 0,\n  cta2target: 0,\n  cta2text: 0,\n  cta2url: (s) => checkCtaUrl(s, {}, 2),\n  description: (s) => s || getMetaContent('name', 'description') || '',\n  details: 0,\n  entityid: (_, options) => {\n    const floodGateColor = options.floodgatecolor || getMetadata('floodgatecolor') || '';\n    const salt = floodGateColor === 'default' || floodGateColor === '' ? '' : floodGateColor;\n    return getUuid(`${options.prodUrl}${salt}`);\n  },\n  env: (s) => s || '',\n  eventduration: 0,\n  eventend: (s) => getDateProp(s, `Invalid Event End Date: ${s}`),\n  eventstart: (s) => getDateProp(s, `Invalid Event Start Date: ${s}`),\n  floodgatecolor: (s, options) => s || options.floodgatecolor || getMetadata('floodgatecolor') || 'default',\n  lang: async (s, options) => {\n    if (s) return s;\n    const { lang } = await getCountryAndLang(options);\n    return lang;\n  },\n  modified: (s) => {\n    const { doc, lastModified } = getConfig();\n    return s\n      ? getDateProp(s, `Invalid Modified Date: ${s}`)\n      : getDateProp(lastModified || doc.lastModified, `document.lastModified is not a valid date: ${doc.lastModified}`);\n  },\n  origin: (s, options) => {\n    if (s) return s;\n    const fgColor = options.floodgatecolor || getMetadata('floodgatecolor');\n    return getOrigin(fgColor);\n  },\n\n  playurl: (s) => checkUrl(s, `Invalid PlayURL: ${s}`),\n  primarytag: (s) => {\n    const tag = getTag(s);\n    return tag ? { id: tag.tagID } : {};\n  },\n  style: (s) => s || 'default',\n  tags: (s) => getTags(s),\n  title: (s) => s || getMetaContent('property', 'og:title') || '',\n  uci: (s, options) => s || options.prodUrl || window.location.pathname,\n  url: (s, options) => {\n    const url = s || options.prodUrl || window.location.origin + window.location.pathname;\n    return checkUrl(url, `Invalid URL: ${url}`);\n  },\n};\n\n// Map the flat props into the structure needed by CaaS\nconst getCaasProps = (p) => {\n  const caasProps = {\n    entityId: p.entityid,\n    contentId: p.contentid,\n    contentType: p.contenttype,\n    environment: p.env,\n    url: p.url,\n    floodGateColor: p.floodgatecolor,\n    universalContentIdentifier: p.uci,\n    title: p.cardtitle || p.title,\n    description: p.carddescription || p.description,\n    createdDate: p.created,\n    modifiedDate: p.modified,\n    tags: p.tags,\n    primaryTag: p.primarytag,\n    ...(p.cardimage && {\n      thumbnail: {\n        altText: p.cardimagealttext,\n        url: p.cardimage,\n      },\n    }),\n    country: p.country,\n    language: p.lang,\n    cardData: {\n      style: p.style,\n      headline: p.cardtitle || p.title,\n      ...(p.details && { details: p.details }),\n      ...((p.bookmarkenabled || p.bookmarkicon || p.bookmarkaction) && {\n        bookmark: {\n          enabled: p.bookmarkenabled,\n          bookmarkIcon: p.bookmarkicon,\n          action: p.bookmarkaction,\n        },\n      }),\n      badges: getBadges(p),\n      ...(p.playurl && { playUrl: p.playurl }),\n      ...((p.cta1url || p.cta2url) && {\n        cta: {\n          ...(p.cta1url && {\n            primaryCta: {\n              text: p.cta1text,\n              url: p.cta1url,\n              style: p.cta1style,\n              icon: p.cta1icon,\n              target: p.cta1target,\n            },\n          }),\n          ...(p.cta2url && {\n            secondaryCta: {\n              text: p.cta2text,\n              url: p.cta2url,\n              style: p.cta2style,\n              icon: p.cta2icon,\n              target: p.cta2target,\n            },\n          }),\n        },\n      }),\n      ...((p.eventduration || p.eventstart || p.eventend) && {\n        event: {\n          duration: p.eventduration,\n          startDate: p.eventstart,\n          endDate: p.eventend,\n        },\n      }),\n    },\n    origin: p.origin,\n    ...(p.arbitrary?.length && { arbitrary: p.arbitrary }),\n  };\n  return caasProps;\n};\n\nconst getCaaSMetadata = async (pageMd, options) => {\n  const md = {};\n  const errors = [];\n  let tagErrors = [];\n  let tags = [];\n  // for-of required to await any async computeVal's\n  for (const [key, computeFn] of Object.entries(props)) {\n    const val = computeFn ? await computeFn(pageMd[key], options) : pageMd[key];\n    if (val?.error) {\n      errors.push(val.error);\n    } else if (val?.tagErrors !== undefined) {\n      tagErrors = val.tagErrors;\n      md[key] = val.tags;\n      tags = val.tags.map((t) => t.id);\n    } else if (val !== undefined) {\n      md[key] = val;\n    }\n  }\n  if (!md.contenttype && tags.length) {\n    md.contenttype = tags.find((tag) => tag.startsWith('caas:content-type'));\n  }\n\n  return { caasMetadata: md, errors, tags, tagErrors };\n};\n\nconst getCardMetadata = async (options) => {\n  const pageMd = parseCardMetadata();\n  return getCaaSMetadata(pageMd, options);\n};\n\nconst postDataToCaaS = async ({ accessToken, caasEnv, caasProps, draftOnly }) => {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(caasProps),\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n      draft: !!draftOnly,\n      'caas-env': caasEnv,\n    },\n  };\n\n  let response;\n  const res = await fetch(URL_POSTXDM, options);\n  if (res !== undefined) {\n    const text = await res.text();\n\n    try {\n      response = JSON.parse(text);\n    } catch {\n      response = text;\n    }\n  }\n  return response;\n};\n\nexport {\n  checkUrl,\n  getCardMetadata,\n  getCaasProps,\n  getConfig,\n  isPagePublished,\n  loadCaasTags,\n  postDataToCaaS,\n  setConfig,\n};\n","/* eslint-disable new-cap */\n/* global tingle */\n/* eslint-disable no-alert */\nimport { getImsToken } from '../utils/utils.js';\n\nimport {\n  getCardMetadata,\n  getCaasProps,\n  isPagePublished,\n  loadCaasTags,\n  postDataToCaaS,\n  setConfig,\n} from './send-utils.js';\n\nconst [setPublishingTrue, setPublishingFalse, isPublishing] = (() => {\n  let publishing = false;\n  return [\n    () => { publishing = true; },\n    () => { publishing = false; },\n    () => publishing,\n  ];\n})();\n\n// Tingle is the js library for displaying modals\nconst loadTingleModalFiles = async (loadScript, loadStyle) => {\n  if (!window.tingle?.modal) {\n    await Promise.all([\n      loadScript('https://milo.adobe.com/libs/deps/tingle.js'),\n      loadStyle('https://milo.adobe.com/libs/deps/tingle.css'),\n    ]);\n  }\n};\n\nconst showAlert = (msg, { error = false, onClose, showBtn = true, btnText = 'OK' } = {}) => {\n  const modal = new tingle.modal({\n    footer: true,\n    closeMethods: ['overlay', 'escape'],\n    onClose() {\n      if (onClose) { onClose(); }\n      this.destroy();\n    },\n  });\n  let msgContent = msg;\n  if (error) { // show alert icon\n    msgContent = `<div class=\"modal-error\"><div class=\"modal-alert\"></div><div>${msg}</div></div>`;\n  }\n  modal.setContent(msgContent);\n  if (showBtn) {\n    modal.addFooterBtn(btnText, 'tingle-btn tingle-btn--primary tingle-btn--pull-right', () => modal.close());\n  }\n  modal.open();\n  return modal;\n};\n\nconst showConfirm = (msg, {\n  onClose,\n  cssClass = [],\n  ctaBtnType = 'primary',\n  ctaText = 'OK',\n  cancelBtnType = 'default',\n  cancelText = 'Cancel',\n  footerContent = '',\n  initCode,\n  leftButton,\n} = {}) => new Promise((resolve) => {\n  let ok = false;\n  const modal = new tingle.modal({\n    cssClass,\n    footer: true,\n    closeMethods: ['escape'],\n    onClose() {\n      if (onClose) onClose(this);\n      this.destroy();\n      resolve(ok);\n    },\n  });\n  modal.setContent(msg);\n  if (footerContent) {\n    modal.setFooterContent(footerContent);\n  }\n\n  if (ctaText) {\n    modal.addFooterBtn(ctaText, `tingle-btn tingle-btn--${ctaBtnType} tingle-btn--pull-right`, () => {\n      ok = true;\n      modal.close();\n    });\n  }\n\n  modal.addFooterBtn(cancelText, `tingle-btn tingle-btn--${cancelBtnType} tingle-btn--pull-right`, () => {\n    ok = false;\n    modal.close();\n  });\n  if (leftButton) {\n    modal.addFooterBtn(leftButton.text, 'tingle-btn tingle-btn--default tingle-btn--pull-left', () => {\n      leftButton.callback?.();\n    });\n  }\n\n  if (initCode) initCode(modal.modal);\n\n  modal.open();\n});\n\nconst displayPublishingModal = () => {\n  const publishingModal = new tingle.modal({\n    closeMethods: [],\n    cssClass: ['modal-text-align-center'],\n    onClose() {\n      this.destroy();\n    },\n  });\n  publishingModal.setContent('Publishing to CaaS...');\n  publishingModal.open();\n  return publishingModal;\n};\n\nconst verifyInfoModal = async (tags, tagErrors, showAllPropertiesAlert) => {\n  let okToContinue = false;\n  let draftOnly = false;\n  let useHtml = false;\n  let caasEnv;\n\n  const seeAllPropsBtn = {\n    text: 'See all properties',\n    callback: showAllPropertiesAlert,\n  };\n\n  const footerOptions = `\n    <div class=\"verify-info-footer\">\n      <div class=\"caas-env\">\n        <label for=\"caas-env-select\">CaaS Env</label>\n        <select name=\"1A\" id=\"caas-env-select\">\n          <option>Prod</option>\n          <option>Stage</option>\n          <option>Dev</option>\n        </select>\n      </div>\n      <div id=\"caas-draft-cb\">\n        <input type=\"checkbox\" id=\"draftcb\" name=\"draftcb\">\n        <label for=\"draftcb\">Publish to Draft only</label>\n      </div>\n      <div id=\"caas-use-html-cb\" class=\"field checkbox\">\n        <input type=\"checkbox\" id=\"usehtml\" name=\"usehtml\">\n        <label for=\"usehtml\">Use .html extension</label>\n      </div>\n    </div>`;\n\n  const onClose = () => {\n    caasEnv = document.getElementById('caas-env-select')?.value?.toLowerCase();\n    draftOnly = document.getElementById('draftcb')?.checked;\n    useHtml = document.getElementById('usehtml')?.checked;\n  };\n\n  const modalInit = (modal) => {\n    const caasEnvSelect = modal.querySelector('#caas-env-select');\n    const caasEnvVal = caasEnvSelect.value?.toLowerCase();\n    const useHtmlCb = modal.querySelector('#usehtml');\n    if (caasEnvVal === 'prod') {\n      useHtmlCb.checked = true;\n    }\n    caasEnvSelect.addEventListener('change', (e) => {\n      useHtmlCb.checked = e.target.value?.toLowerCase() === 'prod';\n    });\n  };\n\n  if (!tags.length) {\n    const msg = '<div><p><b>No Tags found on page</b></p><p>Please add at least one tag to the Card Metadata</p></div>';\n    okToContinue = await showConfirm(msg, {\n      cssClass: ['verify-info-modal'],\n      ctaText: '',\n      cancelBtnType: 'danger',\n      cancelText: 'Cancel Registration',\n      footerContent: footerOptions,\n      leftButton: seeAllPropsBtn,\n      onClose,\n    });\n  } else if (tagErrors.length) {\n    const msg = [\n      '<div class=\"\">',\n      '<p><b>The following tags were not found:</b></p>',\n      tagErrors.join('<br>'),\n      '<p><b>Ok to publish without those tags defined?</b></p>',\n      '<p>The following tags will be used:</p>',\n      tags.join('<br>'),\n      '</div>',\n    ].join('');\n    okToContinue = await showConfirm(msg, {\n      cssClass: ['verify-info-modal'],\n      ctaText: 'Publish with missing tags',\n      cancelBtnType: 'grey',\n      cancelText: 'Cancel Registration',\n      ctaBtnType: 'danger',\n      footerContent: footerOptions,\n      initCode: modalInit,\n      leftButton: seeAllPropsBtn,\n      onClose,\n    });\n  } else {\n    const msg = [\n      '<div><p><b>The following tags will be used:</b></p>',\n      tags.join('<br>'),\n      '<p><b>Please verify that these are correct.</b></p></div>',\n    ].join('');\n    okToContinue = await showConfirm(msg, {\n      cssClass: ['verify-info-modal'],\n      cancelBtnType: 'grey',\n      cancelText: 'Cancel Registration',\n      ctaText: 'Continue with these tags',\n      footerContent: footerOptions,\n      initCode: modalInit,\n      leftButton: seeAllPropsBtn,\n      onClose,\n    });\n  }\n  return {\n    caasEnv,\n    draftOnly,\n    okToContinue,\n    useHtml,\n  };\n};\n\nconst isUseHtmlChecked = () => document.getElementById('usehtml')?.checked;\n\nconst sortObjByPropName = (obj) => Object.keys(obj)\n  // eslint-disable-next-line no-return-assign, no-sequences\n  .sort().reduce((c, d) => (c[d] = obj[d], c), {});\n\nconst validateProps = async (prodHost, publishingModal) => {\n  const { caasMetadata, errors, tags, tagErrors } = await getCardMetadata(\n    { prodUrl: `${prodHost}${window.location.pathname}` },\n  );\n\n  const showAllPropertiesAlert = async () => {\n    const { caasMetadata: cMetaData } = await getCardMetadata(\n      { prodUrl: `${prodHost}${window.location.pathname}${isUseHtmlChecked() ? '.html' : ''}` },\n    );\n    const mdStr = JSON.stringify(sortObjByPropName(cMetaData), undefined, 4);\n    showAlert(`<h3>All CaaS Properties</h3><pre id=\"json\" style=\"white-space:pre-wrap;font-size:14px;\">${mdStr}</pre>`);\n  };\n\n  const { draftOnly, caasEnv, okToContinue, useHtml } = await verifyInfoModal(\n    tags,\n    tagErrors,\n    showAllPropertiesAlert,\n  );\n\n  if (!okToContinue) {\n    setPublishingFalse();\n    publishingModal.close();\n    return false;\n  }\n\n  if (errors.length) {\n    publishingModal.close();\n    const msg = [\n      '<p>There were problems with the following:</p>',\n      errors.join('<br>'),\n      '<p>Publishing to CaaS aborted, please fix errors and try again.</p>',\n    ].join('');\n    showAlert(msg, { error: true, onClose: setPublishingFalse });\n    return false;\n  }\n\n  let metaWithUseHtml;\n  if (useHtml) {\n    ({ caasMetadata: metaWithUseHtml } = await getCardMetadata(\n      { prodUrl: `${prodHost}${window.location.pathname}.html` },\n    ));\n  }\n\n  return {\n    caasEnv,\n    caasMetadata: metaWithUseHtml || caasMetadata,\n    draftOnly,\n  };\n};\n\nconst checkPublishStatus = async (publishingModal) => {\n  if (!(await isPagePublished())) {\n    publishingModal.close();\n    showAlert(\n      'Page must be published before it can be registered with CaaS.<br>Please publish the page and try again.',\n      { error: true },\n    );\n    setPublishingFalse();\n    return false;\n  }\n  return true;\n};\n\nconst checkIms = async (publishingModal, loadScript) => {\n  const accessToken = await getImsToken(loadScript);\n  if (!accessToken) {\n    publishingModal.close();\n    const shouldLogIn = await showConfirm(\n      'You must be logged in with an Adobe ID in order to publish to CaaS.\\nDo you want to log in?',\n    );\n    if (shouldLogIn) {\n      window.adobeIMS.signIn();\n    }\n    setPublishingFalse();\n    return false;\n  }\n  return accessToken;\n};\n\nconst postToCaaS = async ({ accessToken, caasEnv, caasProps, draftOnly, publishingModal }) => {\n  try {\n    const response = await postDataToCaaS({ accessToken, caasEnv, caasProps, draftOnly });\n\n    publishingModal.close();\n\n    if (response.success) {\n      showAlert(\n        `<p>Successfully published page to CaaS!<p><p>Card ID: ${caasProps.entityId}</p>`,\n        { onClose: setPublishingFalse },\n      );\n    } else if (response.error?.startsWith('Invalid User: Not an Adobe employee')) {\n      const msg = 'Please login with your Adobe company account.  Do you want to try logging in again?';\n      const shouldLogIn = await showConfirm(msg, {\n        cancelBtnType: 'grey',\n        cancelText: 'Cancel',\n        ctaText: 'Login',\n      });\n      setPublishingFalse();\n      if (shouldLogIn) window.adobeIMS.signIn();\n    } else {\n      showAlert(\n        response.message || response.error || JSON.stringify(response),\n        { error: true, onClose: setPublishingFalse },\n      );\n    }\n  } catch (e) {\n    publishingModal.close();\n    setPublishingFalse();\n    showAlert(`Error posting to CaaS:<br>${e.message}`, { error: true });\n  }\n};\n\nconst noop = () => {};\n\nconst sendToCaaS = async ({ host = '', project = '', branch = '', repo = '', owner = '' } = {}, loadScript = noop, loadStyle = noop) => {\n  if (isPublishing()) return;\n\n  await loadTingleModalFiles(loadScript, loadStyle);\n  if (window.adobeid?.environment !== 'prod') {\n    showAlert(\n      'Send to CaaS needs to reload the page with prod IMS setup.  Please try again after reload.',\n      {\n        onClose: () => {\n          const url = new URL(window.location);\n          url.searchParams.append('env', 'prod');\n          window.location.assign(url);\n        },\n      },\n    );\n    return;\n  }\n\n  setConfig({\n    host: host || window.location.host, project, branch, repo, owner, doc: document,\n  });\n\n  loadStyle('https://milo.adobe.com/tools/send-to-caas/send-to-caas.css');\n\n  setPublishingTrue();\n  const publishingModal = displayPublishingModal();\n\n  try {\n    if (!host) throw new Error('host must be specified');\n\n    await loadCaasTags();\n    const { caasEnv, caasMetadata, draftOnly } = await validateProps(host, publishingModal);\n    if (!caasMetadata) return;\n\n    const isPublished = await checkPublishStatus(publishingModal);\n    if (!isPublished) return;\n\n    const accessToken = await checkIms(publishingModal, loadScript);\n    if (!accessToken) return;\n\n    const caasProps = getCaasProps(caasMetadata);\n\n    postToCaaS({ accessToken, caasEnv, caasProps, draftOnly, publishingModal });\n  } catch (e) {\n    setPublishingFalse();\n    publishingModal.close();\n    showAlert(`ERROR: ${e.message}`, { error: true });\n  }\n};\n\nexport {\n  loadTingleModalFiles,\n  sendToCaaS,\n  showAlert,\n  showConfirm,\n};\n"],"names":["IMS_CLIENT_ID","IMS_PROD_URL","getImsToken","loadScript","_temp2","window","adobeIMS","getAccessToken","token","adobeid","client_id","environment","scope","_temp","Promise","resolve","then","e","reject","HEX_DIGITS","split","sha1","message","data","TextEncoder","encode","crypto","subtle","digest","uint8ToHex","int","first","second","uint8ArrayToHex","buf","map","join","hashToUuid","slice","parseInt","getUuid","str","Uint8Array","LOCALES","ar","ietf","br","ca","ca_fr","cl","co","cr","ec","el","gt","la","mx","pe","pr","langstore","africa","be_fr","be_en","be_nl","cy_en","dk","de","ee","eg_ar","eg_en","es","fr","gr_en","gr_el","ie","il_en","il_he","it","kw_ar","kw_en","lv","lt","lu_de","lu_en","lu_fr","hu","mt","mena_en","mena_ar","ng","nl","no","pl","pt","qa_ar","qa_en","ro","sa_en","ch_fr","ch_de","ch_it","si","sk","fi","se","tr","ae_en","uk","at","cz","bg","ru","ua","ae_ar","sa_ar","za","au","hk_en","in","id_id","id_en","my_ms","my_en","nz","ph_en","ph_fil","sg","th_en","in_hi","th_th","cn","hk_zh","tw","jp","kr","vn_en","vn_vi","pageConfigHelper","_catch","body","recover","result","CAAS_TAG_URL","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","observer","prototype","onFulfilled","onRejected","callback","_this","_isSettledPact","thenable","_forTo","array","check","i","_cycle","length","HLX_ADMIN_STATUS","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","URL_POSTXDM","VALID_URL_RE","VALID_MODAL_RE","isKeyValPair","isValidUrl","u","test","isValidModal","setConfig","getConfig","config","isInjectedDoc","this","doc","document","c","getKeyValPairs","filter","key","trim","addHost","url","startsWith","host","getMetaContent","propType","propName","metaEl","querySelector","undefined","content","prefixHttps","flattenLink","link","htmlElement","createElement","innerHTML","getAttribute","checkUrl","errorMsg","flatUrl","includes","error","findTag","tags","searchStr","ignore","childTags","matchingTag","Object","find","tag","title","name","path","tagID","keys","tagMatches","toLowerCase","replace","some","childTag","getCaasTags","loadCaasTags","_exit","_result","default","caasTags","namespaces","caas","fetch","resp","ok","json","getTag","tagName","errors","events","getTags","rawTags","t","tagIds","Set","id","tagErrors","getDateProp","dateStr","date","Date","getFullYear","toISOString","processRepoForFloodgate","repo","fgColor","lastIndexOf","getOrigin","project","origin","mappings","cc","dc","originLC","location","hostname","endsWith","singlePageRepo","Error","getUrlWithoutFile","getImagePathMd","keyName","mdEl","children","n","firstElementChild","textContent","img","lastElementChild","imgSrc","src","bulkPublish","rawImgSrc","attributes","urlWithoutFile","pageUrl","URL","pathname","getCardImageUrl","imageUrl","getCardImageAltText","pageMd","parseCardMetadata","cardimage","cardImageUrl","cardImagePath","pop","imgTagForCardImage","alt","getBadges","p","badges","badgeimage","type","badgetext","isPagePublished","branch","owner","res","_exit2","_temp4","_temp3","live","status","_result3","getBulkPublishLangAttr","options","_temp6","getLocale","prodUrl","_temp5","utilsGetLocale","getCountryAndLang","_temp8","langStr","langAttr","lang","country","_temp7","marqueeMetadata","cardMetadata","allowHtml","childNodes","forEach","val","checkCtaUrl","props","arbitrary","pair","bookmarkaction","bookmarkenabled","lcs","bookmarkicon","carddescription","cardtitle","cardimagealttext","contentid","_","contenttype","contentType","created","cardDate","carddate","pubDate","lastModified","cta1icon","cta1style","cta1target","cta1text","cta1url","cta2icon","cta2style","cta2target","cta2text","cta2url","description","details","entityid","floodGateColor","floodgatecolor","getMetadata","salt","env","eventduration","eventend","eventstart","modified","playurl","primarytag","style","uci","getCaasProps","caasProps","entityId","contentId","universalContentIdentifier","createdDate","modifiedDate","primaryTag","thumbnail","altText","language","cardData","headline","bookmark","enabled","bookmarkIcon","action","playUrl","cta","primaryCta","text","icon","secondaryCta","event","duration","startDate","endDate","getCaaSMetadata","_temp11","md","caasMetadata","_temp10","entries","computeFn","_temp9","getCardMetadata","postDataToCaaS","accessToken","caasEnv","draftOnly","method","JSON","stringify","headers","Authorization","draft","response","_temp12","parse","setPublishingTrue","setPublishingFalse","isPublishing","publishing","loadTingleModalFiles","loadStyle","tingle","modal","all","showAlert","msg","onClose","showBtn","btnText","footer","closeMethods","destroy","msgContent","setContent","addFooterBtn","close","open","showConfirm","cssClass","ctaBtnType","ctaText","cancelBtnType","cancelText","footerContent","initCode","leftButton","setFooterContent","displayPublishingModal","publishingModal","verifyInfoModal","showAllPropertiesAlert","okToContinue","useHtml","seeAllPropsBtn","footerOptions","getElementById","checked","modalInit","caasEnvSelect","caasEnvVal","useHtmlCb","addEventListener","_showConfirm","_showConfirm2","_showConfirm3","isUseHtmlChecked","sortObjByPropName","obj","sort","reduce","d","validateProps","prodHost","cMetaData","mdStr","metaWithUseHtml","_getCardMetadata","checkPublishStatus","_isPagePublished","checkIms","shouldLogIn","signIn","postToCaaS","success","noop","sendToCaaS","searchParams","append","assign","isPublished"],"mappings":"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"}