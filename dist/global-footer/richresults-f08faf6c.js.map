{"version":3,"file":"richresults-f08faf6c.js","sources":["../../libs/features/richresults.js"],"sourcesContent":["function getRichResultsForArticle(type, getMetadata) {\n  return {\n    '@context': 'https://schema.org',\n    '@type': type,\n    headLine: getMetadata('og:title'),\n    image: getMetadata('og:image'),\n    datePublished: getMetadata('published'),\n    dateModified: getMetadata('modified'),\n    author: {\n      '@type': 'Person',\n      name: getMetadata('authorname'),\n      url: getMetadata('authorurl'),\n    },\n  };\n}\n\nfunction getRichResultsForSiteSearchBox(getMetadata) {\n  // See specifications at https://developers.google.com/search/docs/appearance/structured-data/sitelinks-searchbox\n  const SEARCH_TERM_STRING = 'search_term_string';\n  const urlTemplate = `${getMetadata('search-url')}?${getMetadata('search-parameter-name')}={${SEARCH_TERM_STRING}}`;\n  return {\n    '@context': 'https://schema.org',\n    '@type': 'WebSite',\n    url: getMetadata('url'),\n    potentialAction: [{\n      '@type': 'SearchAction',\n      target: {\n        '@type': 'EntryPoint',\n        urlTemplate,\n      },\n      'query-input': `required name=${SEARCH_TERM_STRING}`,\n    }],\n  };\n}\n\nfunction getRichResultsForOrgLogo(getMetadata) {\n  return {\n    '@context': 'https://schema.org',\n    '@type': 'Organization',\n    url: getMetadata('orgurl'),\n    logo: getMetadata('orglogo'),\n  };\n}\n\nfunction getRichResults(type, getMetadata) {\n  switch (type) {\n    case 'Article':\n    case 'NewsArticle':\n      return getRichResultsForArticle(type, getMetadata);\n    case 'SiteSearchBox':\n      return getRichResultsForSiteSearchBox(getMetadata);\n    case 'Organization':\n      return getRichResultsForOrgLogo(getMetadata);\n    default:\n      // eslint-disable-next-line no-console\n      console.error(`Type ${type} is not supported`);\n      return null;\n  }\n}\n\nfunction addToDom(richResults, createTag) {\n  if (!richResults) {\n    return;\n  }\n  const script = createTag('script', { type: 'application/ld+json' }, JSON.stringify(richResults));\n  document.head.append(script);\n}\n\n// createTag and getMetadata are passed in to avoid circular dependencies\nexport default function addRichResults(type, { createTag, getMetadata }) {\n  const richResults = getRichResults(type, getMetadata);\n  addToDom(richResults, createTag);\n}\n"],"names":["getRichResultsForArticle","type","getMetadata","headLine","image","datePublished","dateModified","author","name","url","getRichResultsForSiteSearchBox","SEARCH_TERM_STRING","urlTemplate","potentialAction","target","getRichResultsForOrgLogo","logo","getRichResults","console","error","addToDom","richResults","createTag","script","JSON","stringify","document","head","append","addRichResults"],"mappings":"AAAA,SAASA,wBAAwBA,CAACC,IAAI,EAAEC,WAAW,EAAE;EACnD,OAAO;IACL,UAAU,EAAE,oBAAoB;IAChC,OAAO,EAAED,IAAI;IACbE,QAAQ,EAAED,WAAW,CAAC,UAAU,CAAC;IACjCE,KAAK,EAAEF,WAAW,CAAC,UAAU,CAAC;IAC9BG,aAAa,EAAEH,WAAW,CAAC,WAAW,CAAC;IACvCI,YAAY,EAAEJ,WAAW,CAAC,UAAU,CAAC;IACrCK,MAAM,EAAE;MACN,OAAO,EAAE,QAAQ;MACjBC,IAAI,EAAEN,WAAW,CAAC,YAAY,CAAC;MAC/BO,GAAG,EAAEP,WAAW,CAAC,WAAW;;GAE/B;AACH;AAEA,SAASQ,8BAA8BA,CAACR,WAAW,EAAE;;EAEnD,MAAMS,kBAAkB,GAAG,oBAAoB;EAC/C,MAAMC,WAAW,GAAG,GAAGV,WAAW,CAAC,YAAY,CAAC,IAAIA,WAAW,CAAC,uBAAuB,CAAC,KAAKS,kBAAkB,GAAG;EAClH,OAAO;IACL,UAAU,EAAE,oBAAoB;IAChC,OAAO,EAAE,SAAS;IAClBF,GAAG,EAAEP,WAAW,CAAC,KAAK,CAAC;IACvBW,eAAe,EAAE,CAAC;MAChB,OAAO,EAAE,cAAc;MACvBC,MAAM,EAAE;QACN,OAAO,EAAE,YAAY;QACrBF;OACD;MACD,aAAa,EAAE,iBAAiBD,kBAAkB;KACnD;GACF;AACH;AAEA,SAASI,wBAAwBA,CAACb,WAAW,EAAE;EAC7C,OAAO;IACL,UAAU,EAAE,oBAAoB;IAChC,OAAO,EAAE,cAAc;IACvBO,GAAG,EAAEP,WAAW,CAAC,QAAQ,CAAC;IAC1Bc,IAAI,EAAEd,WAAW,CAAC,SAAS;GAC5B;AACH;AAEA,SAASe,cAAcA,CAAChB,IAAI,EAAEC,WAAW,EAAE;EACzC,QAAQD,IAAI;IACV,KAAK,SAAS;IACd,KAAK,aAAa;MAChB,OAAOD,wBAAwB,CAACC,IAAI,EAAEC,WAAW,CAAC;IACpD,KAAK,eAAe;MAClB,OAAOQ,8BAA8B,CAACR,WAAW,CAAC;IACpD,KAAK,cAAc;MACjB,OAAOa,wBAAwB,CAACb,WAAW,CAAC;IAC9C;;MAEEgB,OAAO,CAACC,KAAK,CAAC,QAAQlB,IAAI,mBAAmB,CAAC;MAC9C,OAAO,IAAI;;AAEjB;AAEA,SAASmB,QAAQA,CAACC,WAAW,EAAEC,SAAS,EAAE;EACxC,IAAI,CAACD,WAAW,EAAE;IAChB;;EAEF,MAAME,MAAM,GAAGD,SAAS,CAAC,QAAQ,EAAE;IAAErB,IAAI,EAAE;GAAuB,EAAEuB,IAAI,CAACC,SAAS,CAACJ,WAAW,CAAC,CAAC;EAChGK,QAAQ,CAACC,IAAI,CAACC,MAAM,CAACL,MAAM,CAAC;AAC9B;;AAEA;AACe,SAASM,cAAcA,CAAC5B,IAAI,EAAE;EAAEqB,SAAS;EAAEpB;AAAY,CAAC,EAAE;EACvE,MAAMmB,WAAW,GAAGJ,cAAc,CAAChB,IAAI,EAAEC,WAAW,CAAC;EACrDkB,QAAQ,CAACC,WAAW,EAAEC,SAAS,CAAC;AAClC;;;;"}