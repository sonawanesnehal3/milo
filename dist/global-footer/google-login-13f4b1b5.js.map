{"version":3,"file":"google-login-13f4b1b5.js","sources":["../../libs/features/google-login.js"],"sourcesContent":["const GOOGLE_SCRIPT = 'https://accounts.google.com/gsi/client';\nconst GOOGLE_ID = '530526366930-l874a90ipfkn26naa71r010u8epp39jt.apps.googleusercontent.com';\nconst PLACEHOLDER = 'feds-googleLogin';\nconst WRAPPER = 'feds-profile';\n\nconst onToken = async (getMetadata, data) => {\n  let destination;\n  try {\n    destination = new URL(getMetadata('google-login-redirect'))?.href;\n  } catch {\n    // Do nothing\n  }\n\n  await window.adobeIMS.socialHeadlessSignIn({\n    provider_id: 'google',\n    idp_token: data?.credential,\n    client_id: window.adobeid?.client_id,\n    scope: window.adobeid?.scope,\n  }).then(() => {\n    if (window.DISABLE_PAGE_RELOAD === true) return;\n    // Existing account\n    if (destination) {\n      window.location.assign(destination);\n    } else {\n      window.location.reload();\n    }\n  }).catch(() => {\n    // New account\n    window.adobeIMS.signInWithSocialProvider('google', { redirect_uri: destination || window.location.href });\n  });\n};\n\nexport default async function initGoogleLogin(loadIms, getMetadata, loadScript) {\n  try {\n    await loadIms();\n  } catch {\n    return;\n  }\n  if (window.adobeIMS?.isSignedInUser()) return;\n\n  await loadScript(GOOGLE_SCRIPT);\n  const placeholder = document.createElement('div');\n  placeholder.id = PLACEHOLDER;\n  document.querySelector(`.${WRAPPER}`)?.append(placeholder);\n\n  window.google?.accounts?.id?.initialize({\n    client_id: GOOGLE_ID,\n    callback: (data) => onToken(getMetadata, data),\n    prompt_parent_id: PLACEHOLDER,\n    cancel_on_tap_outside: false,\n  });\n  window.google?.accounts?.id?.prompt();\n}\n"],"names":["_catch","body","recover","result","e","then","initGoogleLogin","loadIms","getMetadata","loadScript","_exit","_temp2","_result","window","adobeIMS","isSignedInUser","Promise","resolve","GOOGLE_SCRIPT","placeholder","document","createElement","id","PLACEHOLDER","querySelector","WRAPPER","append","google","accounts","initialize","client_id","GOOGLE_ID","callback","data","onToken","prompt_parent_id","cancel_on_tap_outside","prompt","_temp","reject","destination","URL","href","socialHeadlessSignIn","provider_id","idp_token","credential","adobeid","scope","DISABLE_PAGE_RELOAD","location","assign","reload","catch","signInWithSocialProvider","redirect_uri"],"mappings":"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"}