{"version":3,"file":"icons-19a87033.js","sources":["../../libs/features/icons/icons.js"],"sourcesContent":["let fetchedIcons;\nlet fetched = false;\n\nasync function getSVGsfromFile(path) {\n  /* c8 ignore next */\n  if (!path) return null;\n  const { customFetch } = await import('../../utils/helpers.js');\n  const resp = await customFetch({ resource: path, withCacheRules: true })\n    .catch(() => ({}));\n  /* c8 ignore next */\n  if (!resp.ok) return null;\n  const miloIcons = {};\n  const text = await resp.text();\n  const parser = new DOMParser();\n  const parsedText = parser.parseFromString(text, 'image/svg+xml');\n  const symbols = parsedText.querySelectorAll('symbol');\n  symbols.forEach((symbol) => {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    while (symbol.firstChild) svg.appendChild(symbol.firstChild);\n    [...symbol.attributes].forEach((attr) => svg.attributes.setNamedItem(attr.cloneNode()));\n    svg.classList.add('icon-milo', `icon-milo-${svg.id}`);\n    miloIcons[svg.id] = svg;\n  });\n  return miloIcons;\n}\n\n// eslint-disable-next-line no-async-promise-executor\nexport const fetchIcons = (config) => new Promise(async (resolve) => {\n  /* c8 ignore next */\n  if (!fetched) {\n    const { miloLibs, codeRoot } = config;\n    const base = miloLibs || codeRoot;\n    fetchedIcons = await getSVGsfromFile(`${base}/img/icons/icons.svg`);\n    fetched = true;\n  }\n  resolve(fetchedIcons);\n});\n\nfunction decorateToolTip(icon) {\n  const wrapper = icon.closest('em');\n  wrapper.className = 'tooltip-wrapper';\n  if (!wrapper) return;\n  const conf = wrapper.textContent.split('|');\n  // Text is the last part of a tooltip\n  const content = conf.pop().trim();\n  if (!content) return;\n  icon.dataset.tooltip = content;\n  // Position is the next to last part of a tooltip\n  const place = conf.pop()?.trim().toLowerCase() || 'right';\n  icon.className = `icon icon-info milo-tooltip ${place}`;\n  wrapper.parentElement.replaceChild(icon, wrapper);\n}\n\nexport default async function loadIcons(icons, config) {\n  const iconSVGs = await fetchIcons(config);\n  if (!iconSVGs) return;\n  icons.forEach(async (icon) => {\n    const { classList } = icon;\n    if (classList.contains('icon-tooltip')) decorateToolTip(icon);\n    const iconName = icon.classList[1].replace('icon-', '');\n    const existingIcon = icon.querySelector('svg');\n    if (!iconSVGs[iconName] || existingIcon) return;\n    const parent = icon.parentElement;\n    if (parent.childNodes.length > 1) {\n      if (parent.lastChild === icon) {\n        icon.classList.add('margin-left');\n      } else if (parent.firstChild === icon) {\n        icon.classList.add('margin-right');\n        if (parent.parentElement.tagName === 'LI') parent.parentElement.classList.add('icon-list-item');\n      } else {\n        icon.classList.add('margin-left', 'margin-right');\n      }\n    }\n    icon.insertAdjacentHTML('afterbegin', iconSVGs[iconName].outerHTML);\n  });\n}\n"],"names":["loadIcons","icons","config","Promise","resolve","fetchIcons","then","iconSVGs","forEach","icon","classList","contains","decorateToolTip","iconName","replace","existingIcon","querySelector","parent","parentElement","childNodes","length","lastChild","add","firstChild","tagName","insertAdjacentHTML","outerHTML","e","reject","getSVGsfromFile","path","customFetch","resource","withCacheRules","catch","resp","ok","miloIcons","text","parser","DOMParser","parsedText","parseFromString","symbols","querySelectorAll","symbol","svg","document","createElementNS","appendChild","attributes","attr","setNamedItem","cloneNode","id","fetchedIcons","fetched","_temp2","_temp","miloLibs","codeRoot","base","_getSVGsfromFile","wrapper","closest","className","conf","textContent","split","content","pop","trim","dataset","tooltip","place","toLowerCase","replaceChild"],"mappings":"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"}