{"version":3,"file":"georouting-29194f0e.js","sources":["../../libs/features/georouting/georouting.js"],"sourcesContent":["export const getCookie = (name) => document.cookie\n  .split('; ')\n  .find((row) => row.startsWith(`${name}=`))\n  ?.split('=')[1];\n\nconst geo2jsonp = (callback) => {\n  // Setup a unique name that can be called & destroyed\n  const callbackName = `jsonp_${Math.round(100000 * Math.random())}`;\n\n  const script = document.createElement('script');\n  script.src = `https://geo2.adobe.com/json/?callback=${callbackName}`;\n\n  // Define the function that the script will call\n  window[callbackName] = (data) => {\n    delete window[callbackName];\n    document.body.removeChild(script);\n    callback(data);\n  };\n\n  document.body.appendChild(script);\n};\n\nconst getAkamaiCode = () => new Promise((resolve) => {\n  const urlParams = new URLSearchParams(window.location.search);\n  const akamaiLocale = urlParams.get('akamaiLocale') || sessionStorage.getItem('akamai');\n  if (akamaiLocale !== null) {\n    resolve(akamaiLocale.toLowerCase());\n  } else {\n    geo2jsonp((data) => {\n      const code = data.country.toLowerCase();\n      sessionStorage.setItem('akamai', code);\n      resolve(code);\n    });\n  }\n});\n\n// Determine if any of the locales can be linked to.\nasync function getAvailableLocales(locales, config, getMetadata) {\n  const fallback = getMetadata('fallbackrouting') || config.fallbackRouting;\n\n  const { contentRoot } = config.locale;\n  const path = window.location.href.replace(contentRoot, '');\n\n  const availableLocales = [];\n  const pagesExist = [];\n  for (const [index, locale] of locales.entries()) {\n    const prefix = locale.prefix ? `/${locale.prefix}` : '';\n    const localeRoot = `${prefix}${config.contentRoot ?? ''}`;\n    const localePath = `${localeRoot}${path}`;\n\n    const pageExistsRequest = fetch(localePath, { method: 'HEAD' }).then((resp) => {\n      if (resp.ok) {\n        locale.url = localePath;\n        availableLocales[index] = locale;\n      } else if (fallback !== 'off') {\n        locale.url = `${localeRoot}/`;\n        availableLocales[index] = locale;\n      }\n    });\n    pagesExist.push(pageExistsRequest);\n  }\n  if (pagesExist.length > 0) await Promise.all(pagesExist);\n\n  return availableLocales.filter((a) => !!a);\n}\n\nfunction buildText(locales, config, createTag) {\n  const fragment = new DocumentFragment();\n  const wrapper = createTag('div', { class: 'text-wrapper' });\n  locales.forEach((locale) => {\n    const lang = config.locales[locale.prefix]?.ietf ?? '';\n    const text = createTag('p', { class: 'locale-text', lang }, locale.text);\n    wrapper.append(text);\n  });\n  fragment.append(wrapper);\n  return fragment;\n}\n\nfunction buildLinks(locales, config, createTag) {\n  const fragment = new DocumentFragment();\n  const wrapper = createTag('div', { class: 'link-wrapper' });\n  locales.forEach((locale) => {\n    const lang = config.locales[locale.prefix]?.ietf ?? '';\n    const link = createTag('a', { class: 'locale-link', lang, href: locale.url }, locale.button);\n    const para = createTag('p', { class: 'locale-link-wrapper' }, link);\n    wrapper.append(para);\n    link.addEventListener('click', () => {\n      const modPrefix = locale.prefix || 'us';\n      // set cookie so legacy code on adobecom still works properly.\n      document.cookie = `international=${modPrefix};path=/`;\n      sessionStorage.setItem('international', modPrefix);\n      link.closest('.dialog-modal').dispatchEvent(new Event('closeModal'));\n    });\n  });\n  fragment.append(wrapper);\n  return fragment;\n}\n\nfunction getCodes(data) {\n  return data.akamaiCodes.split(',').map((a) => a.toLowerCase().trim());\n}\n\nfunction getMatches(data, suppliedCode) {\n  return data.reduce((rdx, locale) => {\n    const localeCodes = getCodes(locale);\n    if (localeCodes.some((code) => code === suppliedCode)) rdx.push(locale);\n    return rdx;\n  }, []);\n}\n\nasync function getDetails(currentPage, localeMatches, config, createTag, getMetadata) {\n  const availableLocales = await getAvailableLocales(localeMatches, config, getMetadata);\n\n  if (availableLocales && availableLocales.length > 0) {\n    currentPage.url = window.location.hash ? document.location.href : '#';\n    const imgUrl = `${config.miloLibs || config.codeRoot}/img/icons/Smock_GlobeOutline_18_N.svg`;\n    const worldIcon = createTag('img', { src: imgUrl, class: 'world-icon' });\n    const text = buildText([...availableLocales, currentPage], config, createTag);\n    const links = buildLinks([...availableLocales, currentPage], config, createTag);\n    const detailsFragment = new DocumentFragment();\n    detailsFragment.append(worldIcon, text, links);\n    return detailsFragment;\n  }\n  return null;\n}\n\nasync function showModal(details) {\n  const { getModal } = await import('../../blocks/modal/modal.js');\n  return getModal(null, { class: 'locale-modal', id: 'locale-modal', content: details, closeEvent: 'closeModal' });\n}\n\nexport default async function loadGeoRouting(config, createTag, getMetadata) {\n  const { locale } = config;\n\n  const urlLocale = locale.prefix.replace('/', '');\n  const storedInter = sessionStorage.getItem('international') || getCookie('international');\n  const storedLocale = storedInter === 'us' ? '' : storedInter;\n\n  const resp = await fetch(`${config.contentRoot ?? ''}/georouting.json`);\n  if (!resp.ok) return;\n  const json = await resp.json();\n\n  const urlGeoData = json.data.find((d) => d.prefix === urlLocale);\n  if (!urlGeoData) return;\n\n  if (storedLocale || storedLocale === '') {\n    // Show modal when url and cookie disagree\n    if (urlLocale.split('_')[0] !== storedLocale.split('_')[0]) {\n      const localeMatches = json.data.filter((d) => d.prefix === storedLocale);\n      const details = await getDetails(urlGeoData, localeMatches, config, createTag, getMetadata);\n      if (details) { await showModal(details); }\n    }\n    return;\n  }\n\n  // Show modal when derived countries from url locale and akamai disagree\n  const akamaiCode = await getAkamaiCode();\n  if (akamaiCode && !getCodes(urlGeoData).includes(akamaiCode)) {\n    const localeMatches = getMatches(json.data, akamaiCode);\n    const details = await getDetails(urlGeoData, localeMatches, config, createTag, getMetadata);\n    if (details) { await showModal(details); }\n  }\n}\n"],"names":["loadGeoRouting","config","createTag","getMetadata","locale","urlLocale","prefix","replace","storedInter","sessionStorage","getItem","getCookie","storedLocale","Promise","resolve","fetch","contentRoot","then","resp","ok","json","_exit","_temp9","_result","getAkamaiCode","akamaiCode","_temp7","getCodes","urlGeoData","includes","localeMatches","getMatches","data","getDetails","details","_temp6","showModal","find","d","_temp8","_temp5","_temp4","split","filter","_temp3","e","reject","getModal","class","id","content","closeEvent","currentPage","getAvailableLocales","availableLocales","length","url","window","location","hash","document","href","imgUrl","miloLibs","codeRoot","worldIcon","src","text","buildText","links","buildLinks","detailsFragment","DocumentFragment","append","locales","_temp2","a","fallback","fallbackRouting","path","pagesExist","_iterator","_createForOfIteratorHelper","entries","_step","s","n","done","index","value","localeRoot","localePath","pageExistsRequest","method","push","err","f","_temp","all","name","cookie","row","startsWith","geo2jsonp","callback","callbackName","Math","round","random","script","createElement","body","removeChild","appendChild","urlParams","URLSearchParams","search","akamaiLocale","get","toLowerCase","code","country","setItem","fragment","wrapper","forEach","lang","ietf","link","button","para","addEventListener","modPrefix","closest","dispatchEvent","Event","akamaiCodes","map","trim","suppliedCode","reduce","rdx","localeCodes","some"],"mappings":"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"}