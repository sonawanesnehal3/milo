{"version":3,"file":"entitlements-8d8707ce.js","sources":["../../libs/features/personalization/entitlements.js"],"sourcesContent":["import { getConfig } from '../../utils/utils.js';\n\nconst ENTITLEMENT_MAP = {\n  '51b1f617-2e43-4e91-a98a-3b7716ecba8f': 'photoshop-any',\n  '8ba78b22-90fb-4b97-a1c4-f8c03a45cbc2': 'indesign-any',\n  '8d3c8ac2-2937-486b-b6ff-37f02271b09b': 'illustrator-any',\n  'fd30e9c7-9ae9-44db-8e70-5c652a5bb1d2': 'cc-all-apps-any',\n  '4e2f2a6e-48c4-49eb-9dd5-c44070abb3f0': 'after-effects-any',\n  'e7650448-268b-4a0d-9795-05f604d7e42f': 'lightroom-any',\n  '619130fc-c7b5-4b39-a687-b32061326869': 'premiere-pro-any',\n  'cec4d899-4b41-469e-9f2d-4658689abf29': 'phsp-ltr-bundle',\n  '8da44606-9841-43d0-af72-86d5a9d3bba0': 'cc-photo',\n  'ab713720-91a2-4e8e-b6d7-6f613e049566': 'any-cc-product-no-stock',\n  'b0f65e1c-7737-4788-b3ae-0011c80bcbe1': 'any-cc-product-with-stock',\n  '934fdc1d-7ba6-4644-908b-53e01e550086': 'any-dc-product',\n  '6dfcb769-324f-42e0-9e12-1fc4dc0ee85b': 'always-on-promo',\n  '015c52cb-30b0-4ac9-b02e-f8716b39bfb6': 'not-q-always-on-promo',\n  '42e06851-64cd-4684-a54a-13777403487a': '3d-substance-collection',\n  'eda8c774-420b-44c2-9006-f9a8d0fb5168': '3d-substance-texturing',\n  '76e408f6-ab08-49f0-adb6-f9b4efcc205d': 'free-cc',\n  '08216aa4-4a0f-4136-8b27-182212764a7c': 'free-dc',\n  // PEP segments\n  '6cb0d58c-3a65-47e2-b459-c52bb158d5b6': 'lightroom-web-usage',\n  'caa3de84-6336-4fa8-8db2-240fc88106cc': 'photoshop-signup-source',\n  'ef82408e-1bab-4518-b655-a88981515d6b': 'photoshop-web-usage',\n  '5c6a4bb8-a2f3-4202-8cca-f5e918b969dc': 'firefly-signup-source',\n  '20106303-e88c-4b15-93e5-f6a1c3215a12': 'firefly-web-usage',\n  '3df0b0b0-d06e-4fcc-986e-cc97f54d04d8': 'acrobat-web-usage',\n};\n\nexport const getEntitlementMap = async () => {\n  const { env, consumerEntitlements } = getConfig();\n  if (env?.name === 'prod') return { ...consumerEntitlements, ...ENTITLEMENT_MAP };\n  const { default: STAGE_ENTITLEMENTS } = await import('./stage-entitlements.js');\n  return { ...consumerEntitlements, ...STAGE_ENTITLEMENTS };\n};\n\nconst getEntitlements = async (data) => {\n  const entitlementMap = await getEntitlementMap();\n\n  return data.flatMap((destination) => {\n    const ents = destination.segments?.flatMap((segment) => {\n      const entMatch = entitlementMap[segment.id];\n      return entMatch ? [entMatch] : [];\n    });\n\n    return ents || [];\n  });\n};\n\nexport default function init(data) {\n  return getEntitlements(data);\n}\n"],"names":["ENTITLEMENT_MAP","getEntitlementMap","env","consumerEntitlements","getConfig","name","Promise","resolve","then","default","STAGE_ENTITLEMENTS","e","reject","getEntitlements","data","entitlementMap","flatMap","destination","ents","segments","segment","entMatch","id","init"],"mappings":";;AAEA,MAAMA,eAAe,GAAG;EACtB,sCAAsC,EAAE,eAAe;EACvD,sCAAsC,EAAE,cAAc;EACtD,sCAAsC,EAAE,iBAAiB;EACzD,sCAAsC,EAAE,iBAAiB;EACzD,sCAAsC,EAAE,mBAAmB;EAC3D,sCAAsC,EAAE,eAAe;EACvD,sCAAsC,EAAE,kBAAkB;EAC1D,sCAAsC,EAAE,iBAAiB;EACzD,sCAAsC,EAAE,UAAU;EAClD,sCAAsC,EAAE,yBAAyB;EACjE,sCAAsC,EAAE,2BAA2B;EACnE,sCAAsC,EAAE,gBAAgB;EACxD,sCAAsC,EAAE,iBAAiB;EACzD,sCAAsC,EAAE,uBAAuB;EAC/D,sCAAsC,EAAE,yBAAyB;EACjE,sCAAsC,EAAE,wBAAwB;EAChE,sCAAsC,EAAE,SAAS;EACjD,sCAAsC,EAAE,SAAS;;EAEjD,sCAAsC,EAAE,qBAAqB;EAC7D,sCAAsC,EAAE,yBAAyB;EACjE,sCAAsC,EAAE,qBAAqB;EAC7D,sCAAsC,EAAE,uBAAuB;EAC/D,sCAAsC,EAAE,mBAAmB;EAC3D,sCAAsC,EAAE;AAC1C,CAAC;MAEYC,iBAAiB;EAAA,IAAe;IAC3C,MAAM;MAAEC,GAAG;MAAEC;KAAsB,GAAGC,SAAS,EAAE;IACjD,IAAIF,GAAG,EAAEG,IAAI,KAAK,MAAM,EAAE,OAAAC,OAAA,CAAAC,OAAA,CAAO;MAAE,GAAGJ,oBAAoB;MAAE,GAAGH;KAAiB;IAAC,OAAAM,OAAA,CAAAC,OAAA,CACnC,OAAO,kCAAyB,CAAC,EAAAC,IAAA,WAAzE;MAAEC,OAAO,EAAEC;KAAoB;MACrC,OAAO;QAAE,GAAGP,oBAAoB;QAAE,GAAGO;OAAoB;;GAC1D,QAAAC,CAAA;IAAA,OAAAL,OAAA,CAAAM,MAAA,CAAAD,CAAA;;AAAA;AAED,MAAME,eAAe,aAAUC,IAAI,EAAK;EAAA,OAAAR,OAAA,CAAAC,OAAA,CACTN,iBAAiB,EAAE,EAAAO,IAAA,WAA1CO,cAAc;IAEpB,OAAOD,IAAI,CAACE,OAAO,CAAEC,WAAW,IAAK;MACnC,MAAMC,IAAI,GAAGD,WAAW,CAACE,QAAQ,EAAEH,OAAO,CAAEI,OAAO,IAAK;QACtD,MAAMC,QAAQ,GAAGN,cAAc,CAACK,OAAO,CAACE,EAAE,CAAC;QAC3C,OAAOD,QAAQ,GAAG,CAACA,QAAQ,CAAC,GAAG,EAAE;OAClC,CAAC;MAEF,OAAOH,IAAI,IAAI,EAAE;KAClB,CAAC;;AACJ,CAAC;AAEc,SAASK,IAAIA,CAACT,IAAI,EAAE;EACjC,OAAOD,eAAe,CAACC,IAAI,CAAC;AAC9B;;;;"}